<?
include("../class/layout.class");
include_once($_SERVER['DOCUMENT_ROOT'].'/class/sms.class');
include_once($_SERVER['DOCUMENT_ROOT'].'/include/sns.config.php');

//echo exif_imagetype("/home/simpleline/www/data/simpleline/images/product/basic_1705.gif");

$db = new Database;
$db2 = new Database;
$adb = new Database;

// sms 관련
$sms = new SMS;
$sms_cnt = $sms->getSMSAbleCount($admininfo);

$sql = "select * from shop_buyingservice_info order by regdate desc limit 1 ";

$db->query ($sql);

if($db->total){
	$db->fetch();

	$exchange_rate = $db->dt[exchange_rate];
	$bs_basic_air_shipping = $db->dt[bs_basic_air_shipping];
	$bs_add_air_shipping = $db->dt[bs_add_air_shipping];
	$bs_duty_rate = $db->dt[bs_duty];
	$bs_supertax_rate = $db->dt[bs_supertax_rate];
	$bs_clearance_fee = $db->dt[clearance_fee];
}

if($id){
	$sql = "select * from shop_product_buyingservice_priceinfo where pid = '$id' order by regdate desc limit 1 ";

	$db->query ($sql);

	if($db->total){
		$db->fetch();

		$orgin_price = $db->dt[orgin_price];
		$exchange_rate = $db->dt[exchange_rate];
		$air_wt = $db->dt[air_wt]; // 예상무게 는 기 입력된 값을 가져옴
		$air_shipping = $db->dt[air_shipping]; // 항공운송료 값도 기 입력된 값을 가져옴
		$duty = (float)$db->dt[duty];
		$clearance_fee = $db->dt[clearance_fee];
		$clearance_type = $db->dt[clearance_type];
		$bs_fee_rate = $db->dt[bs_fee_rate];
		$bs_fee = $db->dt[bs_fee];
	//	echo (float)$duty;
	}
}
if($id == ""){
	$sql = "select commission from ".TBL_COMMON_SELLER_DELIVERY." where company_id = '".$admininfo[company_id]."'";
}else{
	$sql = "select c.commission from ".TBL_COMMON_SELLER_DELIVERY." c , ".TBL_SNS_PRODUCT." p where p.id = '".$id."' and p.admin = c.company_id";
}

$db->query($sql);
$db->fetch();
$company_commission = $db->dt[commission];
$commission = $db->dt[commission];

$db->query("select idx from ".TBL_SNS_ICON." where disp = 1 order by idx");
if($db->total){
	$icon_list = $db->fetchall();
	//print_r($icon_list);
}
$Script = "

<link rel='stylesheet' media='all' type='text/css' href='/admin/js/themes/base/ui.all.css' />

<style>
div#drop_relation_product { width:100%;height:100%;overflow:auto;padding:1px;border:1px solid silver }
div#drop_relation_product.hover { border:5px dashed #aaa; background:#efefef; }

ul {
	LIST-STYLE-IMAGE: none; LIST-STYLE-TYPE: none;padding:0px;
}
li{
	list-style-tyle:none;
	margin:0px;
	padding:0px;
}
  #sortlist {
      list-style-type:none;
      margin:0;
      padding:0;
   }
   #sortlist li {
     font:13px Verdana;
     margin:0;
     padding:0px;
     cursor:move;
   }
  .ctr_1 {text-align:center};
</style>

<script type='text/javascript' src='/js/ui/jquery-ui-1.8.9.custom.js'></script>
<script type='text/javascript' src='/js/ui/jquery.ui.core.js'></script>
<script type='text/javascript' src='/js/ui/jquery.ui.widget.js'></script>
<script type='text/javascript' src='/js/ui/jquery.ui.mouse.js'></script>
<script type='text/javascript' src='/admin/js/ms_productSearch.js'></script>

<script  id='dynamic'></script>
<Script Language='JavaScript'>
var bs_basic_air_shipping = '$bs_basic_air_shipping';
var bs_add_air_shipping = '$bs_add_air_shipping';
var duty_rate = '$bs_duty_rate';
var bs_supertax_rate = '$bs_supertax_rate';
var bs_clearance_fee = '$bs_clearance_fee';


function ChangeOptionName(pid, obj){
	var option_kind = obj[obj.selectedIndex].option_kind;


	document.getElementById('option_kind_value').innerHTML = getOptionKind(option_kind);
	if(option_kind == 'b'){
		document.getElementById('pricebyoption_title').innerHTML = '옵션별가격 *';
		var oobj = document.all.option_kind_view;
		for(i=0;i < oobj.length;i++){
			oobj[i].style.display = 'block';
		}

		var pobj = document.all.option_price_line;
		for(i=0;i < pobj.length;i++){
			pobj[i].style.display = 'block';
		}


	}else if(option_kind == 'p'){
		document.getElementById('pricebyoption_title').innerHTML = '옵션별 추가가격 *';
		var oobj = document.all.option_kind_view;
		for(i=0;i < oobj.length;i++){
			oobj[i].style.display = 'none';
		}

		var pobj = document.all.option_price_line;
		for(i=0;i < pobj.length;i++){
			pobj[i].style.display = 'block';
		}


	}else if(option_kind == 's'){
		document.getElementById('pricebyoption_title').innerHTML = '옵션별가격 *';
		var oobj = document.all.option_kind_view;
		for(i=0;i < oobj.length;i++){
			oobj[i].style.display = 'none';
		}

		var pobj = document.all.option_price_line;
		for(i=0;i < pobj.length;i++){
			pobj[i].style.display = 'none';
		}

	}

	window.forms['optionform'].option_kind.value = option_kind;
	window.frames['act'].location.href='option.act.php?act=view&pid='+pid+'&opn_ix='+obj.value;
	//document.getElementById('act').src='option.act.php?act=view&pid='+pid+'&opn_ix='+obj.value;//kbk
}

function getOptionKind(option_kind){

	if(option_kind == 'b'){
		return '가격재고 관리 옵션';
	}else if(option_kind == 'p'){
		return '가격추가옵션';
	}else if(option_kind == 's'){
		return '선택옵션';
	}else{
		return '';
	}

}

function loadCategory(sel,target) {
	//alert(target);
	var trigger = sel.options[sel.selectedIndex].value;
	var form = sel.form.name;
	//var depth = sel.depth; // 호환성 kbk
	var depth = sel.getAttribute('depth');
	//if(depth == 2){
	//document.write('category.load.php?form=' + form + '&trigger=' + trigger + '&depth='+depth+'&target=' + target);
	//}
	//alert(trigger);
	//dynamic.src = 'category.load.php?form=' + form + '&trigger=' + trigger + '&depth='+depth+'&target=' + target; // 호환성 kbk
	// 크롬과 파폭에서 동작을 한번밖에 안하기에 iframe으로 처리 방식을 바꿈 2011-04-07 kbk
	//document.getElementById('act').src = 'category.load.php?form=' + form + '&trigger=' + trigger + '&depth='+depth+'&target=' + target;
	window.frames['act'].location.href = 'category.load.php?form=' + form + '&trigger=' + trigger + '&depth='+depth+'&target=' + target;

}

$(function() {
	$(\"#spei_couponSDate_datepicker\").datepicker({
		dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
		dateFormat: 'yymmdd',
		buttonImageOnly: true,
		buttonText: '달력',
		onSelect: function(dateText, inst){

		}
	});

	$(\"#spei_couponEDate_datepicker\").datepicker({
		dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
		dateFormat: 'yymmdd',
		buttonImageOnly: true,
		buttonText: '달력'
	});

	$(\"#spei_sDate_datepicker\").datepicker({
		dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
		dateFormat: 'yymmdd',
		buttonImageOnly: true,
		buttonText: '달력',
		onSelect: function(dateText, inst){

		}
	});

	$(\"#spei_eDate_datepicker\").datepicker({
		dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
		dateFormat: 'yymmdd',
		buttonImageOnly: true,
		buttonText: '달력'
	});
});

function init()
{
";
	if ($id != ""){
		$db->query("SELECT * FROM ".TBL_SNS_PRODUCT." sp INNER JOIN ".TBL_SNS_PRODUCT_ETCINFO." spei ON spei.pid = sp.id where sp.id = $id");

		if($db->total != 0)
		{
			$db->fetch(0);
			extract($db->dt);

			$hotcon_event_id = $db->dt[hotcon_event_id];
			$hotcon_pcode = $db->dt[hotcon_pcode];

			$pcode = $db->dt[pcode];
			$act = "update";
			$company = $db->dt[company];
			$state = $db->dt[state];
			$brand = $db->dt[brand];
			$basicinfo = $db->dt[basicinfo];

			$shotinfo = $db->dt[shotinfo];
			$hardware = $db->dt[hardware];
			$software = $db->dt[software];
			$system = $db->dt["system"];
			$etc = $db->dt["etc"];
			$pname = str_replace("'","&#39;",trim($db->dt[pname]));
			$stock = $db->dt[stock];
			$safestock = $db->dt[safestock];
			$search_keyword = $db->dt[search_keyword];
			$disp = $db->dt[disp];
			$surtax_yorn = $db->dt[surtax_yorn];
			$delivery_method = $db->dt[delivery_method];
			$product_type = $db->dt[product_type];
			$delivery_company = $db->dt[delivery_company];
			$reserve = $db->dt[reserve];
			$reserve_yn = $db->dt[reserve_yn];

			$stock_use_yn = $db->dt[stock_use_yn];
			$buyingservice_coprice = $db->dt[buyingservice_coprice];
			$coprice = $db->dt[coprice];
			$sellprice = $db->dt[sellprice];
			$listprice = $db->dt[listprice];
			$bimg_text = $db->dt[bimg];
			$admin = $db->dt[admin];

			$one_commission = $db->dt[one_commission];
			$goods_commission = $db->dt[commission];
			if($one_commission == "Y"){
				$commission = $db->dt[commission];
			}
			$delivery_policy = $db->dt[delivery_policy];
			$delivery_product_policy = $db->dt[delivery_product_policy];
			$delivery_package = $db->dt[delivery_package];
			$delivery_price = $db->dt[delivery_price];
			$free_delivery_yn = $db->dt[free_delivery_yn];
			$free_delivery_count = $db->dt[free_delivery_count];
			$bs_goods_url = $db->dt[bs_goods_url];
			$bs_site = $db->dt[bs_site];

			$icons = explode(";",$db->dt["icons"]);
			for($i=0;$i<count($icons);$i++){
				$icons_checked[$icons[$i]] = "1";
			}



			// sns 관련 값
		}
	}else{
		$disp = "5";
		$act = "insert";

		$surtax_yorn = "N";

		// sns 관련 값
		$spei_couponSDate = mktime(0,0,0,date('m'),date('d'),date('Y'));
		$spei_couponEDate = mktime(23,59,59,date('m'),date('d')+1,date('Y'));
		$spei_sDate = mktime(0,0,0,date('m'),date('d'),date('Y'));
		$spei_eDate = mktime(23,59,59,date('m'),date('d')+1,date('Y'));
		$spei_dispDate = 'Y';
		$spei_dispStock = 'Y';
		$spei_dispathPoint = 'O';
		$spei_targetNumber = 0;
		$spei_addSaleCount = 0;
		$spei_addSaleMaxCount = 0;
		$spei_buyLimitMin = 1;
		$spei_buyLimitMax = 0;
		$spei_discountRate = 0;
		$spei_dispDiscountRate = 'Y';
	}
$Script .="

	Content_Input();

	Init(document.product_input);

	//onLoad('$sDate','$eDate');";

	if($bs_goods_url){
//	$Script .="document.getElementById('bs_site_frame').src= '".$bs_goods_url."';";
	}
	$Script .="
}
function Content_Input(){
	document.product_input.content.value = document.product_input.basicinfo.value;
	//alert(document.product_input.content.value);
}

function onDropAction(mode, pid,rp_pid)
{
	//outTip(img3);
	//alert(1);
	parent.window.frames['act'].location.href='./relation.category.act.php?mode='+mode+'&pid='+pid+'&rp_pid='+rp_pid;
	//parent.document.getElementById('act').src='./relation.category.act.php?mode='+mode+'&pid='+pid+'&rp_pid='+rp_pid;

}
//var cate = new Array();";
$Script=$Script. "

function categoryadd()
{
	var ret;
	var str = new Array();
	var obj = document.product_input.cid;
	for (i=0;i<obj.length;i++){
		if (obj[i].value){
			str[str.length] = obj[i][obj[i].selectedIndex].text;
			ret = obj[i].value;
		}
	}
	if (!ret){
		alert(language_data['sns_goods_input.php']['H'][language]);//'카테고리를 선택해주세요'
		return;
	}
	//var cate = document.all._category;
	var cate=document.getElementsByName('category[]'); // 호환성 kbk
	//alert(cate.length);

	//if(is_array([cate])){
		//alert(cate.length);
		for(i=0;i < cate.length;i++){
			//alert(ret +'=='+ cate[i].value);
			//alert(cate[i].value);
			if(ret == cate[i].value){
				alert(language_data['sns_goods_input.php']['A'][language]);//'이미등록된 카테고리 입니다.'
				return;
			}
		}
	//}

	//cate.unshift(ret);
	var obj = document.getElementById('objCategory');
	//oTr = obj.insertRow();
	oTr = obj.insertRow(-1); // 크롬과 파폭에서는 td의 생성이 반대로 됨 -1 인자를 넣어주면 순서대로 형성됨 2011-04-07 kbk
	oTr.id = 'num_tr';
	oTr.height = '30px';
	//oTr.className = 'dot_xx';
	if(window.addEventListener) oTr.setAttribute('class','');
	else oTr.className = '';
	oTd = oTr.insertCell(-1);
	//oTd.className = '';
	if(window.addEventListener) oTd.setAttribute('class','');
	else oTd.className = '';
	oTd.innerHTML = \"<input type=text name=category[] id='_category' value='\" + ret + \"' style='display:none'>\";
	oTd = oTr.insertCell(-1);
	//oTd.className = '';
	if(window.addEventListener) oTd.setAttribute('class','');
	else oTd.className = '';
	if(oTr.rowIndex == 0){
		oTd.innerHTML = \"<input type=radio name=basic value='\"+ ret + \"' checked>\";
	}else{
		oTd.innerHTML = \"<input type=radio name=basic value='\"+ ret + \"'>\";
	}
	oTd = oTr.insertCell(-1);
	//oTd.id = \"currPosition\";
	if(window.addEventListener) oTd.setAttribute('id','currPosition');
	else oTd.id = 'currPosition';
	//oTd.className = '';
	if(window.addEventListener) oTd.setAttribute('class','');
	else oTd.className = '';
	oTd.innerHTML = str.join(\" > \");
	oTd = oTr.insertCell(-1);
	//oTd.className = '';
	if(window.addEventListener) oTd.setAttribute('class','');
	else oTd.className = '';
	oTd.innerHTML = \" <a href='javascript:void(0)' onClick='category_del(this.parentNode.parentNode)'><img src='../images/".$admininfo["language"]."/btc_del.gif' border=0></a>\";


}

function category_del(el)
{
	idx = el.rowIndex;
	var obj = document.getElementById('objCategory');
	obj.deleteRow(idx);
	var cObj=\$('input[name=basic]');
	if(cObj.length == null){
		//cObj[0].checked = true; // 0이 나오지 null이 나오지 않음 kbk
	}else{
		for(var i=0;i<cObj.length;i++){
			if(cObj[i].checked){
				return true;
				break;
			}else{
				cObj[0].checked = true;
			}
		}
	}
	//cate.splice(idx,1);
}
</Script>";

$Contents = "
	<table cellpadding=0 width=100%>
		<tr>
		    <td align='left' colspan=4 style='padding-bottom:5px;'> ".GetTitleNavigation("상품등록관리", "소셜커머스 > 상품등록관리")."</td>
		</tr>";

$Contents .= "
	</table>";

$Contents = $Contents."
			<!--form name='product_input' action='product_input.act.php' method='post' enctype='multipart/form-data'-->
			<form name=product_input action='goods_input.act.php' method='post' enctype='multipart/form-data' onsubmit='return SubmitX(this);'>
			<input type='hidden' name=act value='insert'>
			<input type='hidden' name=admin value='".$admin."'>
			<input type='hidden' name=id value='".$id."'>
			<input type='hidden' name=bpid value='".$id."'>
			<input type='hidden' name=mode value='".$mode."'>
			<table width=100%>
			<tr height=30 align=left>
				<td width=500>";
			if($id!="") {
				$Contents.="<a href=\"/sns/shop/goods_view.php?id=".$id."\" target=_blank><img src='../images/".$admininfo["language"]."/btn_preview.gif' border=0 align=absmiddle style='cursor:pointer'></a><!--a href=\"JavaScript:PoPWindow('/shop/goods_view.php?id=".$id."',980,800,'comparewindow');\">보기</a-->";
			}
	$Contents.="</td>";

if ($id == "" || $mode == "copy"){
	$Contents .= "<td align=right>";
	if(checkMenuAuth(md5($_SERVER["PHP_SELF"]),"C")){
		$Contents .= "<img src='../images/".$admininfo["language"]."/b_save.gif' border=0 align=absmiddle style='cursor:pointer' onclick=\"ProductInput(document.product_input,'insert');\">";
	}
	$Contents .= "</td>";
}else{
	$Contents .= "<td align=right>";
	if(checkMenuAuth(md5($_SERVER["PHP_SELF"]),"U")){
		$Contents .= "<img src='../images/".$admininfo["language"]."/b_save.gif' border=0 align=absmiddle style='cursor:pointer' onclick=\"ProductInput(document.product_input,'update')\"> ";
	}
	if(checkMenuAuth(md5($_SERVER["PHP_SELF"]),"D")){
		$Contents .= "<img src='../images/".$admininfo["language"]."/b_del.gif' border=0 align=absmiddle style='cursor:pointer' onclick=\"ProductInput(document.product_input,'delete')\">";
	}
	$Contents .= "</td>";
}
$Contents = $Contents."
			</tr>
			</table>";
if($admininfo[admin_level] == 9 || $admininfo[admin_level] == 8){
$Contents = $Contents."			<table cellspacing=0 cellpadding=0 border=0 width='100%'>
			<tr bgcolor='#cccccc' height='36'>
					<td bgcolor=\"#efefef\" width=120 style='padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-1px;'> <b>상품구분</b></td>
					<td colspan=3 bgcolor=\"#efefef\" align='left'>
						<table border=0 cellpadding=0 cellspacing=0 width=550>
							<tr>
								<td>
									<input type='radio' name='product_type' id='product_type_4' value='4'".(($product_type == '4' || $product_type == '') ? ' checked':'')." onclick=\"ShowGoodsTypeInfo('GoodsInfo');\"> <label for='product_type_4'>배송상품</label>
									<input type='radio' name='product_type' id='product_type_5' value='5'".(($product_type == '5') ? ' checked':'')." onclick=\"ShowGoodsTypeInfo('CouponInfo');\"> <label for='product_type_5'>쿠폰상품</label>
									<input type='radio' name='product_type' id='product_type_6' value='6'".(($product_type == '6') ? ' checked':'')." onclick=\"ShowGoodsTypeInfo('TravelInfo');\"> <label for='product_type_6'>여행상품</label>
								</td>

							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td height='3'></td>
				</tr>
			</table><br>";

/*
$goodsHelp_text = "
<table cellpadding=0 cellspacing=0 class='small' >
	<col width=8>
	<col width=*>
	<tr><td valign=top><img src='/admin/image/icon_list.gif' ></td><td class='small' >소셜커머스 상품에 등록 된 상품은 소셜커머스 메뉴에만 노출되게 됩니다.</td></tr>
	<tr><td valign=top><img src='/admin/image/icon_list.gif' ></td><td class='small' >등록된 상품 타입에 따라 쇼핑몰 에서 구분되어 상품이 표시됩니다.</td></tr>
	<tr><td valign=top><img src='/admin/image/icon_list.gif' ></td><td class='small' >변경된 정보는 자동으로 시스템에 반영됩니다.</td></tr>
</table>
";*/
$goodsHelp_text = getTransDiscription(md5($_SERVER["PHP_SELF"]),'A');

$GoodsHelp = HelpBox("배송 상품관리", $goodsHelp_text);

$buyingServiceHelp_text = "
<div style='width:880px;border:2px dotted gray;padding:10px 0px 10px 10px;margin-top:20px;margin-bottom:20px;'>
<table cellpadding=0 cellspacing=0 class='small' >
	<col width=8>
	<col width=*>
	<tr><td><img src='/admin/image/icon_list.gif' align='absmiddle' border='1'></td><td class='small' >
	<strong>쿠폰 상품관리 유효기간</strong> <img src='".$required3_path."'></b> : <input type='text' name='spei_couponSDate' class='textbox' value='".date('Ymd',$spei_couponSDate)."' style='width:80px;text-align:center;' id='spei_couponSDate_datepicker' validation=true title='유효시간시작일' /> ~ <input type='text' name='spei_couponEDate' class='textbox' value='".date('Ymd',$spei_couponEDate)."' style='width:80px;text-align:center;' id='spei_couponEDate_datepicker' validation=true title='유효시간종료일' />
	</td></tr>
</table>
</div>
";
//$buyingServiceHelp = HelpBox("쿠폰 상품관리", $buyingServiceHelp_text);
$buyingServiceHelp = $buyingServiceHelp_text;

$HotConHelp_text = "
<table cellpadding=0 cellspacing=0 class='small' >
	<col width=8>
	<col width=*>
	<tr><td valign=top><img src='/admin/image/icon_list.gif' ></td><td class='small' >여행상품관리 헬프텍스트</td></tr>
</table>
";
$HotConHelp = HelpBox("여행 상품관리", $HotConHelp_text);

$Contents .= "
				<div id='GoodsInfo' style='padding-bottom:20px;".($product_type == "4" || $product_type == "" ? "display:block;":"display:none;")."'>
				$GoodsHelp
				</div>
				<div id='CouponInfo' style='padding-bottom:20px;".($product_type == "5" ? "display:block;":"display:none;")."'>
				$buyingServiceHelp
				</div>
				<div id='TravelInfo' style='padding-bottom:20px;".($product_type == "6" ? "display:block;":"display:none;")."'>
				$HotConHelp
				</div>
				";
}

		$Contents .= "	<table width='100%' cellpadding=0 cellspacing=0><tr height=30><td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<table cellpadding=0 width=100%><tr><td style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-4px;'><b> 카테고리등록 </b><span class=small><!--상단에 카테고리를 선택하신후 카테고리 추가버튼을 클릭하세요.(다중 카테고리 등록지원)--> ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'A')."</span></td><td align=right style='padding-right:20px;' class=small><!--a href='JavaScript:SampleProductInsert()'>샘플데이타 넣기</a--></td></tr></table>")."</td></tr></table>";



			$Contents .= "<table cellpadding=5 cellspacing=1 bgcolor=silver border=0 width='100%'>
				<col width=15%>
				<col width=90%>
				<tr bgcolor='#ffffff'>
					<td bgcolor=\"#efefef\"  nowrap> <b>카테고리 *</b> </td>
					<td  >
					<input type='hidden' name=selected_cid value='".$cid."'>
					<input type='hidden' name=selected_depth value=''>
					<input type='hidden' id='_category' value=''>
					<input type='hidden' id='_category' value=''>
					<input type='hidden' id='basic' value=''>
					<!--input type='hidden' name=cid_1 value=''>
					<input type='hidden' name=cid_2 value=''>
					<input type='hidden' name=cid_3 value=''-->
						<table width=100% border=0 cellpadding=0 cellspacing=0>
							<tr>
								<td width='20%' style='padding-right:2px;'>".getCategoryMultipleSelect("--1차분류--", "cid0", "cid","onChange=\"loadCategory(this,'cid1',2)\" title='1차분류' ", 0, $cid)." </td>
								<td width='20%' style='padding-right:2px;'>".getCategoryMultipleSelect("--2차분류--", "cid1",  "cid","onChange=\"loadCategory(this,'cid2',2)\" title='2차분류'", 1, $cid)." </td>
								<td width='20%' style='padding-right:2px;'>".getCategoryMultipleSelect("--3차분류--", "cid2", "cid", "onChange=\"loadCategory(this,'cid3',2)\" title='3차분류'", 2, $cid)." </td>
								<td width='20%'>".getCategoryMultipleSelect("--4차분류--", "cid3", "cid", "onChange=\"loadCategory(this,'cid_1',2)\" title='4차분류'", 3, $cid)."</td>
								<td  width='20%' style='padding-left:10px'><img src='../images/".$admininfo["language"]."/category_add.gif' align=absmiddle border=0 onclick=\"categoryadd()\" style='cursor:pointer;'></td>
							</tr>
						</table>";

				$Contents .= "	</td>
				</tr>
			</table><br>
			<table border=0 cellpadding=0 cellspacing=0 width='100%' style='padding:5px 10px 5px 10px;border:1px solid silver' >

				<col width=100%>
				<tr>
					<td>";
						if($id != ""){
							$Contents .= PrintRelation($id);
						}else{
						$Contents .= "<table width=100% cellpadding=0 cellspacing=0 id=objCategory >
										<col width=5>
										<col width=50>
										<col width=*>
										<col width=100>
						</table>";
						}
				$Contents .= "	</td>
				</tr>
				<tr><td class='small' height='25' style='padding-left:15px;'><span> <!--* 첫번째 선택된 카테고리가 기본카테고리로 지정되며 라디오 버튼 클릭으로 기본카테고리를 변경 하실 수 있습니다.-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'K')." </span></td></tr>
			</table><br>
			<table width='100%' cellpadding=0 cellspacing=0><tr height=30><td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<table cellpadding=0 width=100%><tr><td style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-4px;'><b> 기본정보 : </b><span class=small><!--굵은 글씨로 되어 있는 항목이 필수 정보입니다.--> ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'C')."</span></td><td align=right style='padding-right:20px;' class=small><!--a href='JavaScript:SampleProductInsert()'>샘플데이타 넣기</a--></td></tr></table>")."</td></tr></table>
			<table cellpadding=0 cellspacing=0 width='100%' style='table-layout:fixed;' class='input_table_box'>
				<col width=18%>
				<col width=32%>
				<col width=18%>
				<col width=32%>
				<tr>
					<td class='input_box_title' nowrap> <b>제품명 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' colspan=3><input type=text class='textbox' name=pname size=28 style='width:99%' value='$pname' validation=true title='제품명'></td>
				</tr>

				";
				if($admininfo[admin_level] == 9){
					if($admininfo[mall_type] == "B" || $admininfo[mall_type] == "O"){
					$Contents .= "<tr>
						<td class='input_box_title'> <b>진열 <img src='".$required3_path."'></b></td>
						<td class='input_box_item'>".displayProduct($disp)."</td>
						<td class='input_box_title' nowrap> <b>공급업체등록 <img src='".$required3_path."'></b></td>
						<td class='input_box_item'>
						".companyAuthList($admin , "validation=true title='공급업체등록' ")."
						</td>
					</tr>";

					}else{
					$Contents .= "<tr>
						<td class='input_box_title'> <b>진열 <img src='".$required3_path."'></b></td>
						<td class='input_box_item' colspan=3>".displayProduct($disp)."</td>

					</tr>";
					}
				}
				$Contents .= "<!--tr height=1><td colspan=4 class='dot-x'></td></tr-->
				<tr>
					<td class='input_box_title'> <b>제품코드 <img src='".$required3_path."'></b></td>
					<td class='input_box_item' style='padding:5px;' colspan=3>
					<input type=text class='textbox' name=pcode size=28 style='width:99%' value='$pcode' validation=true title='제품코드'><br>
					<div style='margin:2 2' class=small><!--* 오프라인 관리 코드를 입력해주세요--> ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'D')."</div>
					</td>
				</tr>

				<tr>
					<td class='input_box_title'> <b>판매상태 <img src='".$required3_path."'></b></td>
					<td class='input_box_item'>".SellState($state)."</td>
					<td class='input_box_title'> <b>재고관리 <img src='".$required3_path."'></b></td>
					<td class='input_box_item' nowrap>
					<table width='100%' cellpadding=0 cellspacing=0>
					<tr>
						<td align=left>

						</td>
						<td align=left>
						재고 <input type=\"text\"  size=5 name=stock value='$stock' id='stock' ".($stock_use_yn == "N" ? "disabled":"")."> 안전재고 <input type=\"text\"  size=5 name=safestock value='$safestock' id='safestock' ".($stock_use_yn == "N" ? "disabled":"").">
						</td>
					</tr>
					</table>
					</td>
				</tr>

				";
				if($layout_config["mall_use_inventory"] == "Y"){
				$Contents .= "<tr bgcolor='#ffffff'>
					<td class='input_box_title'> 면세제품 </td>
					<td class='input_box_item'><input type=radio  name=surtax_yorn value='Y' ".($surtax_yorn == "Y" ? "checked":"")."> 면세 <input type=radio  name=surtax_yorn value='N' ".($surtax_yorn == "N" ? "checked":"")."> 면세아님</td>

					<td class='input_box_title'> 출고보관장소 </td>
					<td class='input_box_item'>".makeSelectBox('inventory_place_info','','inventory_code','등록된창고 가 없습니다.')."</td>
				</tr>";
				}else{
					$Contents .= "<tr>
					<td class='input_box_title'> 면세제품 </td>
					<td class='input_box_item'><input type=radio  name=surtax_yorn value='Y' ".($surtax_yorn == "Y" ? "checked":"")."> 면세 <input type=radio  name=surtax_yorn value='N' ".($surtax_yorn == "N" ? "checked":"")."> 면세아님</td>
					<td class='input_box_title'> <b>재고체크유무 <img src='".$required3_path."'></b></td>
					<td class='input_box_item'><input type=radio  name=stock_use_yn value='Y' ".($stock_use_yn == "Y" || $stock_use_yn == "" ? "checked":"")." onclick=\"stockCheck('1')\"> 재고체크 함 <input type=radio  name=stock_use_yn value='N' ".($stock_use_yn == "N" ? "checked":"")." onclick=\"stockCheck('2')\"> 재고체크 안함</td>

				</tr>";
				}

				$Contents .=	"
				<tr bgcolor='#ffffff'>
					<td class='input_box_title'> 브랜드 </td>
					<td class='input_box_item'>
					<table cellpadding=3 cellspacing=0>
						<tr>
							<td><div id='brand_select_area'>".BrandListSelect($brand, $cid)."</div></td><td><a href=\"javascript:PoPWindow3('brand.php?mmode=pop',960,700,'brand')\"'><img src='../images/".$admininfo["language"]."/btn_pop_manage.gif' align=absmiddle border=0></a></td>
						</tr>
					</table>
					</td>
					<td class='input_box_title'> 제조사</td>
					<td class='input_box_item'><!--input type=text class='textbox' name=company size=28 style='width:100%'-->
					<table cellpadding=3 cellspacing=0>
						<tr>
							<td><div id='company_select_area'>".MakerList($company,$cid)."</div></td><td><a href=\"javascript:PoPWindow3('company.php?mmode=pop',960,600,'company')\"'><img src='../images/".$admininfo["language"]."/btn_pop_manage.gif' align=absmiddle border=0></a></td>
						</tr>
					</table>
					</td>
				</tr>
				<tr >
				<td class='input_box_title'> 아이콘노출 </td>
					<td class='input_box_item' colspan=3>
						";
							if(count($icon_list) >0 ){
								for($i=0;$i<count($icon_list);$i++){
									$Contents .=	"<input type=\"checkbox\" name='icon_check[]' class=nonborder id=icon_check value=".$icon_list[$i][idx]." ".($icons_checked[$icon_list[$i][idx]] == "1" ? "checked":"")." style='vertical-align:middle;' /> <img src='".$admin_config[mall_data_root]."/images/icon/".$icon_list[$i][idx].".gif' align='absmiddle' style='vertical-align:middle'>";
								}
							}

							$Contents .=	" <a href=\"javascript:PoPWindow('../design/product_icon.php?mmode=pop',960,600,'sc_icon')\"'><img src='../images/".$admininfo["language"]."/btn_pop_icon.gif' align=absmiddle border=0></a>
					</td>
				</tr>
				<tr>
					<td class='input_box_title'> 동영상 URL(NEWS) </td>
					<td class='input_box_item' colspan=3 style='line-height:150%'>
					<input type=text class='textbox' name='movie' size=28 style='width:99%' value='$movie'></td>
				</tr>
				<tr>
					<td class='input_box_title'> 검색키워드 </td>
					<td class='input_box_item' style='padding:5px;' colspan=3 style='line-height:150%'>
					<input type=text class='textbox' name='search_keyword' size=28 style='width:99%' value='$search_keyword'><br>
					※<span class=small > <!--검색어를 등록하시면 검색이 검색어가 같이 포함되어 노출되게 됩니다--> ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'E')."</span> </td>
				</tr>

			</table><br>";

// SNS 추가정보
$Contents .= "
			<table width='100%' cellpadding=0 cellspacing=0><tr height=30><td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<div style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-1px;'><b> SNS 추가정보</b></div>")."</td></tr></table>
			<table cellpadding=0 cellspacing=0 bgcolor=silver border=0 width='100%' style='table-layout:fixed;' class='input_table_box'>
				<col width=18%>
				<col width=32%>
				<col width=18%>
				<col width=32%>
				<tr>
					<td class='input_box_title' style='padding:5px;' width=13% nowrap> <b>쿠폰관리번호 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' colspan=3>
						<input type='text' id='spei_couponInfo' name='spei_couponInfo' value='{$spei_couponInfo}' maxlength='4' class='textbox' style='width:60px;' validation=true title='쿠폰관리번호' /> <span class='small'><b><!--쿠폰생성시 상품별 구분자로 들어갈 쿠폰번호 4자리를 입력해주세요-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'L')."</b></span>
						<div class='small'><!--* 일괄 발송/배송 일 경우에만 사용가능-->  ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'F')."</div>
					</td>
				</tr>
				<tr>
					<td class='input_box_title' width=13% nowrap> <b>진행기간 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' style='padding:5px;' colspan=3>
						<input type='text' name='spei_sDateYMD' class='textbox2' value='".date('Ymd',$spei_sDate)."' style='width:80px;text-align:center; vertical-align:middle;' id='spei_sDate_datepicker' validation=true title='진행시작일' />
						<select name='spei_sDateH' class='textbox' style='vertical-align:middle;'>";
						$hh = date('H', $spei_sDate);
						$mm = date('i', $spei_sDate);
						for($i = 0; $i < 24; $i++)	{
							$sel = ($i == $hh)	?	' selected':'';
							$Contents .= "<option value='".str_pad($i, 2, '0', STR_PAD_LEFT)."'{$sel}>".str_pad($i, 2, '0', STR_PAD_LEFT)."</option>";
						}
$Contents .= "
						</select>
						<select name='spei_sDateM' class='textbox' style='vertical-align:middle;'>";
						for($i = 0; $i < 60; $i++)	{
							$sel = ($i == $mm)	?	' selected':'';
							$Contents .= "<option value='".str_pad($i, 2, '0', STR_PAD_LEFT)."'{$sel}>".str_pad($i, 2, '0', STR_PAD_LEFT)."</option>";
						}
$Contents .= "
						</select>
						~
						<input type='text' name='spei_eDateYMD' class='textbox2' value='".date('Ymd',$spei_eDate)."' style='width:80px;text-align:center vertical-align:middle;;' id='spei_eDate_datepicker' validation=true title='진행종료일' />
						<select name='spei_eDateH' class='textbox' style='vertical-align:middle;'>";
						$hh = date('H', $spei_eDate);
						$mm = date('i', $spei_eDate);
						for($i = 0; $i < 24; $i++)	{
							$sel = ($i == $hh)	?	' selected':'';
							$Contents .= "<option value='".str_pad($i, 2, '0', STR_PAD_LEFT)."'{$sel}>".str_pad($i, 2, '0', STR_PAD_LEFT)."</option>";
						}
$Contents .= "
						</select>
						<select name='spei_eDateM' class='textbox' style='vertical-align:middle;'>";
						for($i = 0; $i < 60; $i++)	{
							$sel = ($i == $mm)	?	' selected':'';
							$Contents .= "<option value='".str_pad($i, 2, '0', STR_PAD_LEFT)."'{$sel}>".str_pad($i, 2, '0', STR_PAD_LEFT)."</option>";
						}
$Contents .= "
						</select>
						<div class='small'>
							<!--* 진행기간의 시간을 입력하지 않으시면 00:00분~23:59분 으로 자동 입력됩니다.<br />
							* 진행기간을 입력하지 않으면 종료일 없이 노출되며, 재고상품 소진시 판매완료 됩니다.
						-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'G')."</div>
					</td>
				</tr>
				<tr>
					<td class='input_box_title' width=13% nowrap> <b>남은시간노출 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' colspan=3>
						<input type='radio' id='spei_dispDateY' name='spei_dispDate' value='Y'".(($spei_dispDate == 'Y')	?	' checked':'')." /> <label for='spei_dispDateY'>사용</label>
						<input type='radio' id='spei_dispDateN' name='spei_dispDate' value='N'".(($spei_dispDate == 'N')	?	' checked':'')." /> <label for='spei_dispDateN'>미사용</label>
						<span class='small'><!--(미사용일때는 화면에 노출하지 않습니다.)-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'M')."</span>
					</td>
				</tr>
				<tr>
					<td class='input_box_title' width=13% nowrap> <b>재고량노출 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' colspan=3>
						<input type='radio' id='spei_dispStockY' name='spei_dispStock' value='Y'".(($spei_dispStock == 'Y')	?	' checked':'')." /> <label for='spei_dispStockY'>노출</label>
						<input type='radio' id='spei_dispStockN' name='spei_dispStock' value='N'".(($spei_dispStock == 'N')	?	' checked':'')." /> <label for='spei_dispStockN'>숨김</label>
						<span class='small'><!--(메인에 재고 수량 노출 여부)-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'N')."</span>
					</td>
				</tr>
				<tr>
					<td class='input_box_title' width=13% nowrap> <b>발송시점 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' colspan=3>
						<input type='radio' id='spei_dispathPointO' name='spei_dispathPoint' value='O'".(($spei_dispathPoint == 'O')	?	' checked':'')." /> <label for='spei_dispathPointO'>즉시 발송/배송</label>
						<input type='radio' id='spei_dispathPointA' name='spei_dispathPoint' value='A'".(($spei_dispathPoint == 'A')	?	' checked':'')." /> <label for='spei_dispathPointA'>일괄 발송/배송</label>
					</td>
				</tr>
				<tr>
					<td class='input_box_title' width=13% nowrap> <b>구매달성인원 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' style='padding:5px;' colspan=3>
						<input type='text' id='spei_targetNumber' name='spei_targetNumber' value='{$spei_targetNumber}' class='textbox' style='width:60px;' /> <span class='small'><!--명 이상 구매 시 할인가 적용 <b>(0명 일 경우 구매달성 제한 없음)</b>-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'O')."</span>
						<div class='small'><!--* 일괄 발송/배송 일 경우에만 사용가능-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'P')."</div>
					</td>
				</tr>
				<tr>
					<td class='input_box_title' width=13% nowrap> <b>최대판매수량 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' colspan=3>
						<input type='text' id='spei_addSaleMaxCount' name='spei_addSaleMaxCount' value='{$spei_addSaleMaxCount}' class='textbox' style='width:60px;' />
						<span class='small'><--(판매할 총 상품 수량.)-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'Q')."</span>
					</td>
				</tr>
				<tr>
					<td class='input_box_title' width=13% nowrap> <b>판매수량노출설정 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' colspan=3>
						<input type='text' id='spei_addSaleCount' name='spei_addSaleCount' value='{$spei_addSaleCount}' class='textbox' style='width:60px;' />
						<span class='small'><!--(실제 판매된 수량에 합산되어 출력 됩니다.)-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'R')."</span>
					</td>
				</tr>
				<tr>
					<td class='input_box_title' width=13% nowrap> <b>구매수량설정 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' style='padding:5px;' colspan=3>
						최소구매수량 : <input type='text' id='spei_buyLimitMin' name='spei_buyLimitMin' value='{$spei_buyLimitMin}' class='textbox' style='width:60px;' />
						최대구매수량 : <input type='text' id='spei_buyLimitMax' name='spei_buyLimitMax' value='{$spei_buyLimitMax}' class='textbox' style='width:60px;' />
						<p style='padding-top:3px; margin:0px;'><!--(0 일경우 제한 없습니다.)-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'S')."</p>
					</td>
				</tr>
				<tr>
					<td class='input_box_title' width=13% nowrap> <b>SMS 문구 <img src='".$required3_path."'></b> </td>
					<td class='input_box_item' style='padding:5px;' colspan=3>
						<div style='float:left;width:140px;'><textarea id='spei_smsMessage' name='spei_smsMessage' style='width:120px;height:100px;'>".$spei_smsMessage."</textarea></div>
						<div style='float:left;width:400px;margin-left:20px;line-height:18px;' class='small'>
							<!--SMS  전송 서비스는 회원 전용 서비스 입니다.<br />
							입력한 SMS <u>내용이 80byte 를 초과 할 경우 여러 개의 문자로 발송</u> 되며<br />
							SMS  충전수량이  남아있지 않은 경우 발송 되지 않습니다.<br />
							현재 잔여 수량 <b>".number_format($sms_cnt)."건</b> 입니다.-->
							".getTransDiscription(md5($_SERVER["PHP_SELF"]),'T', $sms_cnt,"sms_cnt")."
						</div>
					</td>
				</tr>
				<tr bgcolor='#ffffff'>
				</tr>
			</table><br />
			";

$Contents .= "
			<table width='100%' cellpadding=0 cellspacing=0><tr height=30><td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<div style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-1px;'><b> 가격정보</b> <a onclick=\"alert(language_data['sns_goods_input.php']['B'][language]);\"><img src='../image/movie_manual.gif' align=absmiddle></a></div>")."</td></tr></table>
			";//'동영상 메뉴얼 준비중입니다'
if ($admininfo[admin_level] != 9){
	if($act == "update"){
		$dispString = "style='display:none;'";
		$readonlyString = " readonly";
		$colorString = ";background-color:#efefef;color:gray";
		$message = "onclick=\"alert(language_data['sns_goods_input.php']['C'][language]);\"";//'가격 정보를 수정하시고자 할대는 MD와 상의해 주세요'
	}else{
		//$dispString = "style='display:none;'";
		//$readonlyString = " readonly";
		//$colorString = ";background-color:#efefef;color:gray";
		//$message = "onclick=\"alert('입점업체는 공급가격만 입력하실수 있습니다');\"";
	}
}

$Contents = $Contents."
			<table cellpadding=0 cellspacing=1 bgcolor=#ffffff width='100%' >
				<tr>
				    <td align='left' colspan=4 style='padding-bottom:0px;'>
				    <div class='tab'>
							<table class='s_org_tab'>
							<tr>
								<td class='tab'>
									<table id='p_tab_01'  class='on'>
									<tr>
										<th class='box_01'></th>
										<td class='box_02' onclick=\"showPriceTabContents('price_info','p_tab_01');\">가격정보입력</td>
										<th class='box_03'></th>
									</tr>
									</table>
									<table id='p_tab_02'  ".($admininfo[admin_level] == 9 ? "style='display:none;":"style='display:none;' ").">
									<tr>
										<th class='box_01'></th>
										<td class='box_02' onclick=\"showPriceTabContents('detail_price_info','p_tab_02');\">수수료계산기</td>
										<th class='box_03'></th>
									</tr>
									</table>

								</td>
								<td class='btn'>

								</td>
							</tr>
							</table>
					</div>
					<div class='mallstory t_no'>
						<!-- my_movie start -->

						<div class='my_box'>
							<div class='doong' id='price_info_box' style='display:block;vertical-align:top;' >
								<table cellpadding=3 cellspacing=0 width=100%>
									<tr id=\"buyingServiceClearanceType\" style='".($product_type == "1" ? "":"display:none;")."'>
										<td>
											<table width=100% cellpadding=0 cellspacing=0>
												<col width=90%>
												<col width=10%>
												<tr>
													<td align=left>
														<table cellpadding=1 cellspacing=1 bgcolor=#c0c0c0 width=100%>
															<col width=10%>
															<col width=20%>
															<col width=10%>
															<col width=60%>
															<tr bgcolor='#ffffff' height=30 align=center>
																<td bgcolor='#efefef'>통관타입</td>
																<td style='padding:1px 3px 1px 1px' nowrap>
																<input type='radio' name='clearance_type' id='clearance_type_1' onclick='caculateBuyingServicePrice(this);' value='1' ".($clearance_type == "1" ? "checked":"")."><label for='clearance_type_1'>목록통관</label> <input type='radio' name='clearance_type' id='clearance_type_0' onclick='caculateBuyingServicePrice(this);' value='0' ".($clearance_type == "0" ? "checked":"")."> <label for='clearance_type_0'>일반통관</label>
																</td>
																<td bgcolor='#efefef'>상품 URL</td>
																<td ><input  type=hidden name='bs_site' value='".$bs_site."'><input  type=text name='bs_goods_url' value='".$bs_goods_url."' style='width:430px;'>  </td>
															</tr>
														</table>
													</td>
													<td align=center>".($product_type == "1" ? " <a href=\"javascript:PoPWindow('buyingService_pricehistory.php?mmode=pop&id=$id',960,600,'brand')\"'><img src='../images/".$admininfo["language"]."/btn_bs_priceinfo.gif' align=absmiddle></a>":"<a href=\"javascript:alert(language_data['sns_goods_input.php']['D'][language]);\"'><img src='../images/".$admininfo["language"]."/btn_bs_priceinfo.gif' align=absmiddle></a>")."</td>
													<!--td align=left>

													</td>
													<td></td-->

												</tr>
											</table>
										</td>
									</tr>
									<tr>
										<td>
											<table cellpadding=1 cellspacing=1 bgcolor=silver width=100% id=\"buyingServiceInfTable\" style='".($product_type == "1" ? "display:block;":"display:none;")."'>
											<col width=10%>
											<col width=10%>
											<col width=16%>
											<col width=10%>
											<col width=12%>
											<col width=18%>
											<tr bgcolor='#efefef' height=35 align=center>
												".($admininfo[admin_level] == 9 ? "<td>Orgin 원가($)</td>":"")."
												<td >환율 </td>
												<td class='small'>예상무게(파운드)/항공운송료($)</td>
												<td >관세 / 부가세</td>
												<td >통관수수료 </td>
												<!--td >딜러  ".($admininfo[admin_level] == 9 ? "<span class=small onclick=\"copyPrice(document.product_input, document.product_input.prd_dealer_price.value, 4);\" style='cursor:pointer;color:red'>복사→</span>":"")."</td-->
												<td class='small'>구매대행 수수료율(%)/수수료  </td>


											</tr>
											<tr bgcolor='#fbfbfb' height=35 align=center>
												".($admininfo[admin_level] == 9 ? "<td ><input  type=hidden name='b_orgin_price' value='".$orgin_price."'><input  type=text class='textbox' size=10  name='orgin_price' value='".$orgin_price."' style='text-align:right;background-color:#efefef' readonly></td>":"")."
												<td>
													<input type=hidden name=b_exchange_rate value='$exchange_rate'>
													".$currency_display[$admin_config["currency_unit"]]["front"]." <input type=text class='textbox' name=exchange_rate size=10 value='$exchange_rate' onkeydown='onlyEditableNumber(this)' maxlength=16 onkeyup='this.value=FormatNumber3(this.value);' style='ime-mode:disabled;TEXT-ALIGN:right;padding-right:3px;background-color:#efefef;".$colorString." ' readonly> ".$currency_display[$admin_config["currency_unit"]]["back"]."
												</td>
												<td >
													<input  type=hidden name='b_air_wt' value='$air_wt' >
													<input  type=text class='textbox' size=4  name='air_wt' value='$air_wt' style='text-align:right;' onkeydown='onlyEditableNumber(this);' maxlength=16 onkeyup='caculateBuyingServicePrice(this);this.value=FormatNumber3(this.value);'> lbs /
													<input  type=hidden name='b_air_shipping' value='$air_shipping' >
													<input  type=text class='textbox' size=4  name='air_shipping' value='$air_shipping'  style='text-align:right;background-color:#efefef' readonly> $
													</td>
												<td>
													<input type=hidden name=b_duty value='$duty'>
													".$currency_display[$admin_config["currency_unit"]]["front"]." <input type=text class='textbox' name=duty value='$duty' size=10 onkeydown='onlyEditableNumber(this)' style='ime-mode:disabled;TEXT-ALIGN:right;background-color:#efefef;".$colorString."'  maxlength=16 onkeyup='this.value=FormatNumber3(this.value);'   readonly> ".$currency_display[$admin_config["currency_unit"]]["back"]."
												</td>
												<td >
													<input type=text class='textbox' name=clearance_fee size=10 style='text-align:right' value='$clearance_fee' onkeydown='onlyEditableNumber(this)' onkeyup='this.value=FormatNumber3(this.value);calcurate_maginrate(document.product_input)' style='ime-mode:disabled;TEXT-ALIGN:right;background-color:#efefef;".$colorString."' readonly >
													".$currency_display[$admin_config["currency_unit"]]["front"]." <input type=hidden name=b_clearance_fee value='$clearance_fee' > ".$currency_display[$admin_config["currency_unit"]]["back"]."
												</td>
												<td>
													<input type=hidden name=b_bs_fee_rate value='$bs_fee_rate'>
													<input type=text class='textbox' name=bs_fee_rate size=4 value='$bs_fee_rate' onkeydown='onlyEditableNumber(this)' maxlength=16 onkeyup='caculateBuyingServicePrice(this);this.value=FormatNumber3(this.value);' style='ime-mode:disabled;TEXT-ALIGN:right;".$colorString."' $message  $readonlyString>
													<input type=hidden name=b_bs_fee value='$bs_fee'>
													".$currency_display[$admin_config["currency_unit"]]["front"]." <input type=text class='textbox' name=bs_fee size=13 value='$bs_fee' onkeydown='onlyEditableNumber(this)' maxlength=16 onkeyup='caculateBuyingServicePrice(this);this.value=FormatNumber3(this.value);' style='ime-mode:disabled;TEXT-ALIGN:right".$colorString."' $message  $readonlyString> ".$currency_display[$admin_config["currency_unit"]]["back"]."
												</td>
											</tr>
											</table>
										</td>
									</tr>
									<tr>
										<td>
											<table cellpadding=1 cellspacing=1 bgcolor=silver width=100% >
											<col width=20%>
											<col width=20%>
											<col width=20%>
											<col width=15%>
											<col width=25%>
											<tr bgcolor='#efefef' height=35 align=center>
												<!--".($admininfo[admin_level] == 9 ? "<td>구매대행원가</td>":"")."-->
												<td >".($admininfo[admin_level] == 9 ? "<b>구매단가(구매대행원가) <img src='".$required3_path."'></b>":"<b>공급가격 <img src='".$required3_path."'></b>")." </td>
												<td ><b>판매가(할인가) <img src='".$required3_path."'></b>".($admininfo[admin_level] == 9 ? "<span class=small onclick=\"copyPrice(document.product_input, document.product_input.sellprice.value, 1);calcurate_maginrate(document.product_input)\" style='cursor:pointer;color:red'> 복사→</span>":"")." </td>
												<td ><b>정가 <img src='".$required3_path."'></b></td>


												<!--td >딜러  ".($admininfo[admin_level] == 9 ? "<span class=small onclick=\"copyPrice(document.product_input, document.product_input.prd_dealer_price.value, 4);\" style='cursor:pointer;color:red'>복사→</span>":"")."</td>
												<td >대리점  </td-->
												<td >마진(%) </td>
												<td >할인율(%) </td>

											</tr>
											<tr bgcolor='#fbfbfb' height=35 align=center>
												<!--".($admininfo[admin_level] == 9 ? "<td ><input  type=text class='textbox' size=13  name='buyingservice_coprice' value='".$buyingservice_coprice."' style='text-align:right;background-color:#efefef' readonly></td>":"")."-->
												<td ><input type=text class='textbox' name=coprice size=13 style='text-align:right' value='$coprice' onkeydown='onlyEditableNumber(this)' onkeyup='this.value=FormatNumber3(this.value);calcurate_maginrate(document.product_input)' style='ime-mode:disabled;TEXT-ALIGN:right".$colorString."'  $message  $readonlyString validation=true title='구매단가'>".$currency_display[$admin_config["currency_unit"]]["front"]." <input type=hidden name=bcoprice value='$coprice' > ".$currency_display[$admin_config["currency_unit"]]["back"]." </td>
												<td> <input type=hidden name=bsellprice value='$sellprice'>".$currency_display[$admin_config["currency_unit"]]["front"]." <input type=text class='textbox' name=sellprice size=13 value='$sellprice' onkeydown='onlyEditableNumber(this)' maxlength=16 onkeyup='this.value=FormatNumber3(this.value);calcurate_maginrate(document.product_input)' style='ime-mode:disabled;TEXT-ALIGN:right;padding-right:3px;".$colorString." ' $message  $readonlyString validation=true title='판매가'> ".$currency_display[$admin_config["currency_unit"]]["back"]."</td>
												<td><input type=hidden name=blistprice value='$listprice'> ".$currency_display[$admin_config["currency_unit"]]["front"]." <input type=text class='textbox' name=listprice value='$listprice' size=13 onkeydown='onlyEditableNumber(this)' style='ime-mode:disabled;TEXT-ALIGN:right".$colorString."'  maxlength=16 onkeyup='this.value=FormatNumber3(this.value);'   $message  $readonlyString validation=true title='정가'> ".$currency_display[$admin_config["currency_unit"]]["back"]."</td>
												<!--td>".$currency_display[$admin_config["currency_unit"]]["front"]."  <input type=text class='textbox' name=prd_dealer_price size=13 value='$prd_dealer_price' onkeydown='onlyEditableNumber(this)' maxlength=16 onkeyup='this.value=FormatNumber3(this.value);' style='Time-mode:disabled;EXT-ALIGN:right".$colorString."' $message  $readonlyString> ".$currency_display[$admin_config["currency_unit"]]["back"]."</td>
												<td>".$currency_display[$admin_config["currency_unit"]]["front"]." <input type=text class='textbox' name=prd_agent_price size=13 value='$prd_agent_price' onkeydown='onlyEditableNumber(this)' maxlength=16 onkeyup='this.value=FormatNumber3(this.value);' style='ime-mode:disabled;TEXT-ALIGN:right".$colorString."' $message  $readonlyString> ".$currency_display[$admin_config["currency_unit"]]["back"]."</td-->
												<td > <input  type=text class='textbox' size=13  name='basic_margin' style='text-align:right;background-color:#efefef' readonly></td>
												<td >
													<input type=text class='textbox' id='spei_discountRate' name='spei_discountRate' value='{$spei_discountRate}' size=4  />%
													<input type='radio' id='spei_dispDiscountRateY' name='spei_dispDiscountRate' value='Y'".(($spei_dispDiscountRate == 'Y')	?	' checked':'')." /> <label for='spei_dispDiscountRateY'>노출</label>
													<input type='radio' id='spei_dispDiscountRateN' name='spei_dispDiscountRate' value='N'".(($spei_dispDiscountRate == 'N')	?	' checked':'')." /> <label for='spei_dispDiscountRateN'>미노출</label>
												</td>
											</tr>
											</table>
										</td>
									</tr>";


								$Contents .="<tr ".($admininfo[admin_level] != 9 ? "style='display:none'":"").">
										<td>
											<table cellpadding=1 cellspacing=1 bgcolor=silver width=100% border=0>
											<col width=25% />
											<col width=25% />
											<col width=25% />
											<col width=25% />
											<tr bgcolor='#efefef' height=35 align=center>

												<td nowrap>개별 적립금 사용유무</td>
												<td bgcolor='#fbfbfb'>
												<input type='radio' name='reserve_yn' value='Y' ".($reserve_yn == "Y" ? "checked":"").">적용 <input type='radio' name='reserve_yn' value='N' ".($reserve_yn == "N" || $reserve_yn == "" ? "checked":"")."> 적용안함
												</td>
												<td nowrap>개별 적립금 </td>
												<td bgcolor='#fbfbfb'>
													<input type=text class='textbox2' name=reserve size=13 style='text-align:right;padding-right:3px;' onkeypress='onlyEditableNumber(this)' onkeyup='onlyEditableNumber(this)' value='$reserve'>
													<input type=hidden name=breserve size=15 style='text-align:right;padding-right:3px; vertical-align:middle;' value='$reserve' readonly>



													<select name=rate1 style='font-size:12px;width:50px; height:22px; vertical-align:middle;' onchange=\"if(this.form.sellprice.value == ''){alert(language_data['sns_goods_input.php']['E'][language]);}else{this.form.reserve.value=Round2(filterNum(this.form.sellprice.value) * this.value/100,1,1);}\">
														<option value=0>0%</option>
														<option value='0.5'>0.5%</option>
														<option value=1>1%</option>
														<option value='1.5'>1.5%</option>
														<option value='2' selected>2%</option>
														<option value='2.5'>2.5%</option>
														<option value=3>3%</option>
														<option value=5>5%</option>
														<option value=7>7%</option>
														<option value=10>10%</option>
														<option value=37>37%</option>
													</select>
												</td>

											</tr>
											</table>
											<!--table width=100% cellpadding=0 cellspacing=0>
												<col width=33%>
												<col width=1%>
												<col width=33%>
												<col width=1%>
												<col width=32%>
												<tr>
													<td align=left>
														<table cellpadding=1 cellspacing=1 bgcolor=#c0c0c0 width=100%>
															<tr bgcolor='#ffffff' height=30 align=center>
																<td colspan=2 bgcolor='#fbfbfb'>개별 적립금 사용유무</td>
																<td style='padding:1 3 1 1' nowrap>
																<input type='radio' name='reserve_yn' value='Y' ".($reserve_yn == "Y" ? "checked":"").">적용 <input type='radio' name='reserve_yn' value='N' ".($reserve_yn == "N" || $reserve_yn == "" ? "checked":"")."> 적용안함
																</td>
															</tr>
														</table>
													</td>
													<td></td>
													<td align=left>
														<table cellpadding=1 cellspacing=1 bgcolor=#c0c0c0 width=100%>
															<tr bgcolor='#ffffff' height=30 align=center>
																<td colspan=2 bgcolor='#fbfbfb'>개별 적립금 </td>
																<td style='padding:1 3 1 1' nowrap>
																<table cellpadding=3 cellspacing=0>
																<tr>
																	<td >
																	<input type=text class='textbox' name=reserve size=13 style='text-align:right' onkeypress='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)'  value='$reserve'>
																	<input type=hidden name=breserve size=15 style='text-align:right' value='$reserve' readonly>

																	</td>
																	<td align=center>

																		<select name=rate1 style='font-size:12px;width:50' onchange=\"if(this.form.sellprice.value == ''){alert(language_data['sns_goods_input.php']['E'][language]);}else{this.form.reserve.value=Round2(filterNum(this.form.sellprice.value) * this.value/100,1,1);}\">
																		<option value=0>0%</option>
																		<option value='0.5'>0.5%</option>
																		<option value=1>1%</option>
																		<option value='1.5'>1.5%</option>
																		<option value='2' selected>2%</option>
																		<option value='2.5'>2.5%</option>
																		<option value=3>3%</option>
																		<option value=5>5%</option>
																		<option value=7>7%</option>
																		<option value=10>10%</option>
																		<option value=37>37%</option>
																	</select>
																	</td>
																</tr>
																</table>
																</td>
															</tr>
														</table>
													</td>
													<td></td>

												</tr>
											</table-->
										</td>
									</tr>";

									$Contents .="<tr>
										<td>";
/*
$help_text2 = "
<table cellpadding=0 cellspacing=0 class='small' >
	<col width=8>
	<col width=*>
	<tr><td><img src='/admin/image/icon_list.gif' align='absmiddle' /></td><td class='small' ><input size=8 type=text class='textbox' style='width:100;background-color:#efefef;height:15px;' value='' readonly> 색깔로 된 입력상자는 자동계산되서 입력되어 집니다. <!--<input size=8 type=text class='textbox' style='width:100;height:15px;' value='' readonly> 색깔의 입력상자에 정보를 입력하신후 --></td></tr>
	<tr><td><img src='/admin/image/icon_list.gif' align='absmiddle' /></td><td class='small' >판매가(할인가)는 실제 노출되는 상품의 금액이며, 정가의 경우 상품의 정상가격을 나타내는 금액입니다. 구매단가는 상품의 공급가 입니다.</td></tr>
	<tr><td><img src='/admin/image/icon_list.gif' align='absmiddle' /></td><td class='small' >가격정보가 동일할 경우는 <span class=small  style='cursor:pointer;color:red'>복사→</span> 클릭해주세요</td></tr>
	<tr><td><img src='/admin/image/icon_list.gif' align='absmiddle' /></td><td class='small' >적립금을 백분율로 계산할때는 <b> 판매가(할인가)</b>를 기준으로 계산됩니다</td></tr>
</table>
";*/
$help_text2 = getTransDiscription(md5($_SERVER["PHP_SELF"]),'H');

$help_text = "
<table cellpadding=1 cellspacing=0 bgcolor=#c0c0c0 width=100%>
						<col width=20%>
						<col width=20%>
						<col width=20%>
						<col width=20%>
						<col width=20%>
						<tr bgcolor='#ffffff' height=25 align=center>
							<td align=left>카드수수료(<input type=text class='textbox' name=card_pay value='4' size=2 readonly style='border:1px;text-align:center'>% 기준)</td>
							<td>적립금사용(현금) </td>
							<td >무이자 수수료</td>
							<td ><b>토탈수수료</b></td>
							<td rowspan=2> &nbsp;<input type=button onclick='calcurate_margin(document.product_input);' value='계산하기'></td>
						</tr>
						<tr bgcolor='#ffffff' height=25 align=center>

							<td align=left><input type=text class='textbox' name=card_price value='' style='width:80%;text-align:right;background-color:#efefef' size=8 readonly></td>
							<td> + <input size=8 type=text class='textbox' name='reserve_price' style='text-align:right;width:80%;background-color:#efefef' readonly></td>
							<td> + <input size=8 type=text class='textbox' name='nointerest_price' style='text-align:right;width:80%;background-color:#efefef' value='' readonly></td>
							<td> = <input size=8 type=text class='textbox' name='margin' style='text-align:right;width:80%;background-color:#efefef' value='' readonly></td>
						</tr>
						<tr bgcolor='#ffffff'>
							<td  colspan=5 style='padding-top:10px;'>
							$help_text2
							</td>
						</tr>
						</table>";


$Contents .= "<div id='price_info' style='width:100%;'>".HelpBox("가격정보입력", $help_text2)."</div>";
$Contents .= "<div id='detail_price_info' style='position:relative;display:none'>".HelpBox("판매수수료 상세내역", $help_text, 200)."</div>";


$Contents .= "								</td>
									</tr>
								</table><br>

							</div>
						</div>
					</div>
				    </td>
				</tr>";



$Contents .="	</table>";

$admin_delievery_policy = getTopDeliveryPolicy($db);

if($id ==""){ // 신규 상품 등록일 경우 해당 입점업체의 정책대로 저장 한다.


	//$db2->fetch();


		$sql = "select if(delivery_policy != 1,delivery_freeprice, '".$admin_delievery_policy[delivery_freeprice]."') as delivery_freeprice ,
			if(delivery_policy != 1,delivery_price, '".$admin_delievery_policy[delivery_price]."') as delivery_price,
			if(delivery_policy != 1,delivery_basic_policy, '".$admin_delievery_policy[delivery_basic_policy]."') as delivery_basic_policy
			from ".TBL_COMMON_SELLER_DELIVERY." where company_id = '".$admininfo[company_id]."' ";


}else{

	$sql = "select if(delivery_policy != 1,delivery_freeprice, '".$admin_delievery_policy[delivery_freeprice]."') as delivery_freeprice ,
			if(delivery_policy != 1,delivery_price, '".$admin_delievery_policy[delivery_price]."') as delivery_price,
			if(delivery_policy != 1,delivery_basic_policy, '".$admin_delievery_policy[delivery_basic_policy]."') as delivery_basic_policy
			from ".TBL_COMMON_SELLER_DELIVERY." where company_id = '".$admin."' ";

}

$db2->query($sql);
$db2->fetch();

//print_r($admininfo);
if($admininfo[mall_type] == "B" || $admininfo[mall_type] == "O"){
$Contents .= "<table width='100%' cellpadding=0 cellspacing=0 ><tr height=30><td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<table cellpadding=0 width=100%><tr><td style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-4px;'><b> 상품별 배송 정책 설정 </b></td><td align=right style='padding-right:20px;' class=small><!--a href='JavaScript:SampleProductInsert()'>샘플데이타 넣기</a--></td></tr></table>")."</td></tr></table>
<input type='hidden' name='delivery_company' value='".($delivery_company == "" ? "MI":$delivery_company)."'>
				<table width='100%' cellpadding=0 cellspacing=1 bgcolor=silver>
					<col width='18%'>
					<col width='*'>";
/*
$Contents .= "
					<tr bgcolor='#ffffff' height=30'>
						<td bgcolor=\"#efefef\" align=left nowrap> 상품별 배송업체 </td>
						<td nowrap>
						<input type='radio' name='delivery_company' value='WE' ".($delivery_company == "WE" ? "checked":"")." id='delivery_company_1'><label for='delivery_company_1'>본사배송</label>
						<input type='radio' name='delivery_company' value='MI' ".($delivery_company == "MI"  || $delivery_company == "" ? "checked":"")." id='delivery_company_2'><label for='delivery_company_2'>입점업체배송</label>
						</td>
					</tr>";
*/
$Contents .= "
					<tr bgcolor='#ffffff' height=30>
						<td class='input_box_title' nowrap> 상품별 개별정책 설정 </td>
						<td nowrap>
						<input type='radio' name='delivery_policy' value='1' ".($delivery_policy == '1' || $delivery_policy == "" ? "checked":"")." onclick=\"deliveryTypeView('1')\" id='delivery_policy_1'><label for='delivery_policy_1'>사용안함</label>
						<input type='radio' name='delivery_policy' value='2' ".($delivery_policy == '2' ? "checked":"")." onclick=\"deliveryTypeView('2')\" id='delivery_policy_2'><label for='delivery_policy_2'>사용</label>
						</td>

					</tr>
					<tr bgcolor='#ffffff' height=30>
						<td class='input_box_title' nowrap> 배송비 정책 </td>
						<td id='policy_input' style='display:none' nowrap>
							<input type='radio' name='delivery_product_policy' value='3' ".($delivery_product_policy == '3' ? "checked":"")." id='delivery_product_policy_1' onClick='no_pay_delivery(1)'><label for='delivery_product_policy_1'>무료배송 </label>
							<input type='radio' name='delivery_product_policy' value='1' ".($id == "" || $delivery_product_policy == '1' ? "checked":"")." id='delivery_product_policy_2' onClick='no_pay_delivery(2)'><label for='delivery_product_policy_2'>유료배송 </label>
							".$currency_display[$admin_config["currency_unit"]]["front"]." <input  type='text' class=textbox name='delivery_price' value='".$delivery_price."' style='TEXT-ALIGN:right;width:70px;'> ".$currency_display[$admin_config["currency_unit"]]["back"]."
						</td>
						<td id='policy_text' style='padding:0 0 0 10px' nowrap>";
						if($admininfo[admin_level] ==9 && $id == ""){
							//$Contents .= "입점업체 배송정책은 상품등록 후 확인/변경 하실수 있습니다.";
							$Contents .= getTransDiscription(md5($_SERVER["PHP_SELF"]),'V');
						}else{
							if($db2->dt[delivery_basic_policy] == "1"){
								$Contents .= "배송비 결제 : 선불 &nbsp;&nbsp;&nbsp;상품합계금액이 ".$currency_display[$admin_config["currency_unit"]]["front"]."  <b>".number_format($db2->dt[delivery_freeprice])."</b> ".$currency_display[$admin_config["currency_unit"]]["back"]." 미만 일때 ".$currency_display[$admin_config["currency_unit"]]["front"]." <b>".number_format($db2->dt[delivery_price])."</b> ".$currency_display[$admin_config["currency_unit"]]["back"]." 부과";
							}else if($db2->dt[delivery_basic_policy] == "2"){
								$Contents .= "배송비 결제 : 착불 &nbsp;&nbsp;&nbsp;상품합계금액이 ".$currency_display[$admin_config["currency_unit"]]["front"]."  <b>".number_format($db2->dt[delivery_freeprice])."</b> ".$currency_display[$admin_config["currency_unit"]]["back"]." 미만 일때 ".$currency_display[$admin_config["currency_unit"]]["front"]." <b>".number_format($db2->dt[delivery_price])."</b> ".$currency_display[$admin_config["currency_unit"]]["back"]." 부과";
							}else{
								$Contents .= "무료";
							}
						}
						$Contents .= "</td>
					</tr>
				</table>
				<table width='100%' cellpadding=0 cellspacing=0 class='input_table_box'>
					<col width='18%'>
					<col width='*'>
					<tr>
						<td class='input_box_title' nowrap> 상품묶음배송여부 </td>
						<td class='input_box_item' id='package_input' nowrap><input type='checkbox' name='delivery_package' id='delivery_package_y' value='Y' ".($delivery_package == 'Y' ? "checked":"")."><label for='delivery_package_y'>묶음배송 사용안함</label></td>
					</tr>

					<tr>
						<td class='input_box_title' nowrap> 구매수량당 무료배송 </td>
						<td class='input_box_item' nowrap>
						<input type='radio' name='free_delivery_yn' value='N' ".($free_delivery_yn == 'N' || $free_delivery_yn == "" ? "checked":"")." id='free_delivery_yn_1' onclick=\"document.product_input.free_delivery_count.value='';document.getElementById('free_delivery_count').disabled = true\"><label for='free_delivery_yn_1'>사용안함</label>
						<input type='radio' name='free_delivery_yn' value='Y' ".($free_delivery_yn == 'Y' ? "checked":"")." id='free_delivery_yn_2' onclick=\"document.getElementById('free_delivery_count').disabled = false\" ".($delivery_product_policy == '3' ? "disabled":"")."><label for='free_delivery_yn_2'>사용</label></td>
					</tr>

					<tr>
						<td class='input_box_title' nowrap> 구매수량  </td>
						<td class='input_box_item' id='DP' nowrap> <input style='width:40px' type='text' class=textbox size='30' name='free_delivery_count' value='".$free_delivery_count."' id='free_delivery_count' company_commission='".$company_commission."' style='TEXT-ALIGN:right' disabled> <!--이상 구매시 무료배송됩니다.--> ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'W')."</td>
					</tr>
				</table><br>";
}else{
	$Contents .= "<input type='hidden' name='delivery_company' value='WE' >";
}
if($admininfo[mall_use_multishop]){
	if($admininfo[admin_level] ==9 || $admininfo[admin_level] == 8 ){
	$Contents .= "<table width='100%' cellpadding=0 cellspacing=0 ".($admininfo[admin_level] == 8 ? "style='display:none;'":"")."><tr height=30><td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<table cellpadding=0 width=100%><tr><td style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-4px;'><b> 수수료정보 </b></td><td align=right style='padding-right:20px;' class=small><!--a href='JavaScript:SampleProductInsert()'>샘플데이타 넣기</a--></td></tr></table>")."</td></tr></table>
				<table width='100%' cellpadding=0 cellspacing=0 class='input_table_box' ".($admininfo[admin_level] == 8 ? "style='display:none;'":"").">
										<tr>
											<td class='input_box_title' colapne=3 width=120 bgcolor=\"#efefef\" align=left class=small nowrap> 개별수수료 사용 </td>
											<td class='input_box_item' nowrap><input type='radio' name='one_commission' value='N' ".($one_commission == 'N' || $one_commission == "" ? "checked":"")." onclick=\"commissionChange(this.form)\">사용안함<input type='radio' name='one_commission' value='Y' ".($one_commission == 'Y' ? "checked":"")." onclick=\"commissionChange(this.form)\">사용</td>
										</tr>

										<tr>
											<td class='input_box_title' nowrap> 수수료  </td>
											<td class='input_box_item' style='padding-top:5px;' id='DP' style='display:block' class=small nowrap> <input style='width:40px' type='text' class='textbox numeric' size='30' name='commission' value='".$commission."' goods_commission='".$goods_commission."' company_commission='".$company_commission."'   style='TEXT-ALIGN:right' onkeyup=\"if(this.value.length > 0){this.goods_commission=this.value;commissionChange(this.form)}\">  <!--% 단위로 입력하시기 바랍니다. * 개별수수료 사용 선택시에만 입력하실 수 있습니다.--> ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'K')."</td>

										</tr>
				</table><br>";
	}
}


$Contents .="<table width='100%' cellpadding=0 cellspacing=0>
							<tr height=30>
							<td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<div style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-4px;'><b> 가격+재고 관리 옵션정보 </b> <!--span class=small > <img src='../images/".$admininfo["language"]."/webedit/wtool6_1.gif' align=absmiddle> 이미지를 클릭해서 상품상세 이미지를 등록해주세요</span--></div>")."</td>
							</tr>
							</table>";


$sql = "select * from ".TBL_SNS_PRODUCT_OPTIONS." where pid = '".$id."' and pid != '' and option_kind = 'b' order by opn_ix ";

$db->query($sql);
$db->fetch();
$options_price_stock = $db->dt;

$Contents .= "
							<table width='100%' cellpadding=5 cellspacing=1 bgcolor=silver id='options_basic_input' class='options_basic_input' opt_idx=0 style='margin-bottom:10px'>
								<col width='4%'>
								<col width='*'>
								<col width='14%'>
								<col width='14%'>
								<col width='14%'>
								<col width='14%'>
								<col width='14%'>
								<tr height=25 bgcolor='#ffffff' align=center>
									<td bgcolor=\"#efefef\" class=small nowrap>
									사용
									</td>
									<td bgcolor=\"#efefef\" class=small nowrap>
									 옵션명
									</td>
									<td bgcolor=\"#efefef\" class=small> 옵션구분 *</td>
									<td bgcolor=\"#efefef\" class=small> 옵션가격 *</td>
									<td bgcolor=\"#efefef\" class=small> 옵션별재고 *</td>
									<td bgcolor=\"#efefef\" class=small> 안전재고 </td>
									<td bgcolor=\"#efefef\" class=small> 기타 </td>
								</tr>
								<tr bgcolor='#ffffff' align=center>
									<td valign=top style='padding-top:10px;'>
									<input type=hidden name='options_price_stock[option_kind]' value='b'><input type=hidden name='options_price_stock[option_type]' value='9'>
									<input type=checkbox name='options_price_stock[option_use]' id='options_price_stock_option_use'  value='1' ".($options_price_stock[option_use] == 1 ? "checked":"").">
									</td>
									<td valign=top style='padding-top:10px;'>
									<input type=hidden name='options_price_stock[opn_ix]' id='option_opn_ix' value='".$options_price_stock[opn_ix]."'>
									<input type=text class='textbox' name='options_price_stock[option_name]' id='options_price_stock_option_name' style='width:120px;vertical-align:middle' value='".$options_price_stock[option_name]."'>

									<a onclick=\"copyOptions('options_basic_item_input_0');showMessage('options_basic_item_input_status_area','가격+재고 옵션 구분정보가 추가 되었습니다. ');\" ><img src='../images/".$admininfo["language"]."/btn_option_detail_add.gif' border=0 align=absmiddle style='margin:0 0 3px 0;'></a>
									</td>
									<td colspan=5 id='options_basic_item_input_table'><input type=hidden id='options_price_stock_option_div' inputid='options_price_stock_option_div' value=''><input type=hidden id='options_price_stock_option_price' value=''><input type=hidden id='options_price_stock_option_etc' value=''><input type=hidden id='options_price_stock_option_stock' value=''>";

$sql = "select * from ".TBL_SNS_PRODUCT_OPTIONS_DETAIL." where pid = '".$id."' and pid != ''  and opn_ix = '".$options_price_stock[opn_ix]."' order by id asc ";
//echo $sql;
$db->query($sql);

if($db->total){
	for($i=0;$i < $db->total;$i++){
	$db->fetch($i);

$Contents .= "
										<table width=100% id='options_basic_item_input_0' class='options_basic_item_input_0' opt_idx=0 cellspacing=0 cellpadding=0 >
											<col width='20%'>
											<col width='20%'>
											<col width='20%'>
											<col width='20%'>
											<col width='20%'>
											<tr>
												<td>
													<input type=hidden name='options_price_stock[opd_ix][]' value='".$options_price_stock[id]."'>
													<input type=text class='textbox' name='options_price_stock[option_div][]' id='options_price_stock_option_div' inputid='options_price_stock_option_div' style='width:118px;vertical-align:middle' value='".$db->dt[option_div]."'>
												</td>
												<td><input type=text class='textbox' name='options_price_stock[price][]' id='options_price_stock_option_price'  style='width:118px' value='".$db->dt[option_price]."' onkeydown='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)' ></td>
												<td><input type=text class='textbox' name='options_price_stock[stock][]' id='options_price_stock_option_stock' style='width:118px' value='".$db->dt[option_stock]."' onkeydown='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)'></td>
												<td><input type=text class='textbox' name='options_price_stock[safestock][]' style='width:118px' value='".$db->dt[option_safestock]."' onkeydown='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)'></td>";

$Contents .= "					<td><input type=text class='textbox' name='options_price_stock[etc1][]' id='options_price_stock_option_etc' style='width:118px' value='".$db->dt[option_etc1]."'> <img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' title='더블클릭시 해당 라인이 삭제 됩니다.' ondblclick=\"if($('.options_basic_item_input_0').length > 1){document.getElementById('options_basic_item_input_table').removeChild(this.parentNode.parentNode.parentNode.parentNode);/*this.parentNode.parentNode.parentNode.parentNode.removeNode(true);*/showMessage('options_basic_item_input_status_area','가격+재고 옵션 구분정보가 삭제 되었습니다.');}else{clearInputBox('options_basic_input');$('options_price_stock_option_name').value='';showMessage('options_basic_item_input_status_area','가격+재고 옵션 구분정보가 삭제 되었습니다.');}\"> </td>";

//$Contents .= "					<td><input type=text class='textbox' name='options_price_stock[etc1][]' size=28 style='width:80%' value='".$db->dt[option_etc1]."'> ".($i == 0 ? "<!-- 옵션 삭제 -->":"<img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' alt='더블클릭시 해당 라인이 삭제 됩니다.'>")." </td>";

$Contents .= "
											</tr>
										</table>";
	}
}else{

	$Contents .= "
										<table width=100% id='options_basic_item_input_0' class='options_basic_item_input_0' opt_idx=0 cellspacing=0 cellpadding=0 >
											<col width='20%'>
											<col width='20%'>
											<col width='20%'>
											<col width='20%'>
											<col width='20%'>
											<tr align='center'>
												<td height='30'>
													<input type=hidden name='options_price_stock[opd_ix][]' value=''>
													<input type=text class='textbox' name='options_price_stock[option_div][]' id='options_price_stock_option_div' inputid='options_price_stock_option_div' style='width:98px;vertical-align:middle' value=''>
												</td>
												<td><input type=text class='textbox' name='options_price_stock[price][]' id='options_price_stock_option_price'  style='width:98px' value='' onkeydown='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)'></td>
												<td><input type=text class='textbox' name='options_price_stock[stock][]' id='options_price_stock_option_stock' style='width:98px' value='' onkeydown='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)'></td>
												<td><input type=text class='textbox' name='options_price_stock[safestock][]' style='width:98px' value='' onkeydown='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)'></td>
												<td><input type=text class='textbox' name='options_price_stock[etc1][]' id='options_price_stock_option_etc' style='width:78px' value=''> <img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' title='더블클릭시 해당 라인이 삭제 됩니다.' ondblclick=\"if($('.options_basic_item_input_0').length > 1){document.getElementById('options_basic_item_input_table').removeChild(this.parentNode.parentNode.parentNode.parentNode);/*this.parentNode.parentNode.parentNode.parentNode.removeNode(true);*/showMessage('options_basic_item_input_status_area','가격+재고 옵션 구분정보가 삭제 되었습니다.');}else{clearInputBox('options_basic_input');$('options_price_stock_option_name').value='';showMessage('options_basic_item_input_status_area','가격+재고 옵션 구분정보가 삭제 되었습니다.');}\"> </td>
											</tr>
										</table>";
}
$Contents .= "
									</td>
								</tr>
							</table>
							<div style='height:30px;text-align:right;color:gray;line-height:220%;' id='options_basic_item_input_status_area'></div><br>";
$Contents .="<table width='100%' cellpadding=0 cellspacing=0><tr height=30><td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<div style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-4px;'><b> 옵션정보 </b> <!--span class=small > <img src='../images/".$admininfo["language"]."/webedit/wtool6_1.gif' align=absmiddle> 이미지를 클릭해서 상품상세 이미지를 등록해주세요</span--></div>")."</td></tr></table>";

$Contents .= "<table><tr><td><a onclick=\"copyOptions('options_input')\"><img src='../images/".$admininfo["language"]."/btn_option_add.gif' border=0 align=absmiddle style='margin:0 0 3px 0;'></a></td><td><input type=checkbox name='option_all_use' valign='middle' id='option_all_use' value='Y' align=absmiddle><label for='option_all_use' >옵션전체사용안함</label> <span class=small>(선택 후 저장하시면 옵션정보가 모두 삭제됩니다)</span></td></tr></table><input type=hidden id='option_name' inputid='option_name' value=''><input type=hidden id='options_option_use'  value='1'>";

$sql = "select * from ".TBL_SNS_PRODUCT_OPTIONS." where pid = '".$id."' and option_kind != 'b' order by opn_ix asc ";
//echo $sql;
$db->query($sql);

$options = $db->fetchall();
//print_r($options);
if($db->total){
	for($i=0;$i < count($options);$i++){
		$Contents .= "
							<table width='100%' cellpadding=0 cellspacing=1 bgcolor=silver id='options_input' class='options_input' idx=".$i." style='margin-bottom:10px' >
								<col width='4%'>
								<col width='17%'>
								<col width='*'>
								<col width='19%'>
								<col width='19%'>
								<col width='19%'>
								<tr height=25 bgcolor='#ffffff' align=center>
									<td bgcolor=\"#efefef\" class=small nowrap>
									사용
									</td>
									<td bgcolor=\"#efefef\" class=small nowrap>
									 옵션명
									</td>
									<td bgcolor=\"#efefef\" class=small nowrap>
									 옵션종류
									</td>
									<td bgcolor=\"#efefef\" class=small> 옵션구분 *</td>
									<td bgcolor=\"#efefef\" class=small> 추가가격 *</td>
									<td bgcolor=\"#efefef\" class=small> 기타  </td>
								</tr>
								<tr bgcolor='#ffffff' align=center>
									<td valign=top style='padding-top:6px;'>
										<input type=hidden name='options[".$i."][opn_ix]' id='option_opn_ix' value='".$options[$i][opn_ix]."'>
										<input type=hidden name='options[".$i."][option_type]' value='".($options[$i][option_type] ? $options[$i][option_type]:"9")."'>
										<input type=checkbox name='options[".$i."][option_use]' id='options_option_use' value='1' ".($options[$i][option_use] == 1 ? "checked":"")." style='margin:0 0 0 0' align=absmiddle>
									</td>
									<td valign=top style='padding-top:4px;'>
										";

//$Contents .= "			<input type=text class='textbox' name='options[".$i."][option_name]' id='option_name' size=28 style='width:115;vertical-align:middle' value='".$options[$i][option_name]."'> <img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if(document.all.options_input.length > 1){this.parentNode.parentNode.parentNode.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\" alt='더블클릭시 해당 라인이 삭제 됩니다.'>";
$Contents .= "			<span id='".$i."'><input type=text class='textbox' name='options[".$i."][option_name]' id='option_name' inputid='option_name' style='width:115px;vertical-align:middle' value='".$options[$i][option_name]."'> </span>

										".($i == 0 ? "<!-- 옵션 삭제 -->":"<img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if($('.options_input').length > 1){ \$('.options_input[idx=".$i."]').parentNode.removeChild(\$('.options_input[idx=".$i."]'));/*this.parentNode.parentNode.parentNode.removeNode(true);*/showMessage('options_input_status_area_".$i."','해당 옵션 구분정보가 삭제 되었습니다.');}else{alert(language_data['sns_goods_input.php']['F'][language]);}\" title='더블클릭시 해당 테이블이 삭제 됩니다.'>")." ";

$Contents .= "
									</td>
									<td valign=top style='padding-top:4px;'>
										<select name='options[".$i."][option_kind]' id='option_kind_1' style='font-size:12px;'>
											<option value=s ".($options[$i][option_kind] == "s" ? "selected":"").">선택옵션</option>
											<option value=p ".($options[$i][option_kind] == "p" ? "selected":"").">가격추가옵션</option>

										</select>
										<img src='../images/".$admininfo["language"]."/btn_option_detail_add.gif' border=0 align=absmiddle style='cursor:pointer;' onclick=\"copyOptions('options_item_input_".$i."');showMessage('options_input_status_area_".$i."','해당옵션 구분정보가 추가 되었습니다.');\" />
									</td>
									<td colspan=3 id='options_basic_item_input_table_".$i."'><input type=hidden id='options_item_option_div_".$i."' inputid='options_item_option_div_".$i."' value=''><input type=hidden id='options_item_option_etc_".$i."' value=''>
									";

			$sql = "select * from ".TBL_SNS_PRODUCT_OPTIONS_DETAIL." where pid = '".$id."' and opn_ix = '".$options[$i][opn_ix]."' order by id asc ";
			//echo $sql;
			$db->query($sql);

			if($db->total){
				for($j=0;$j < $db->total;$j++){
				$db->fetch($j);

		$Contents .= "<table width=100% id='options_item_input_".$i."' class='options_item_input_".$i."' idx=".$i." detail_idx=".$j." cellspacing=4 cellpadding=0 ><!--ondblclick=\"if(document.all.options_item_input_0.length > 1){this.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\"-->
											<col width='33%'>
											<col width='33%'>
											<col width='34%'>
											<tr>
												<td>
												<input type=hidden name='options[".$i."][details][".$j."][opd_ix]' style='width:90%;vertical-align:middle' value='".$db->dt[id]."'>
												<input type=text class='textbox' name='options[".$i."][details][".$j."][option_div]' id='options_item_option_div_".$i."' inputid='options_item_option_div_".$i."' style='width:90%;vertical-align:middle' value='".$db->dt[option_div]."'>
												</td>
												<td><input type=text class='textbox' name='options[".$i."][details][".$j."][price]' style='width:90%' value='".$db->dt[option_price]."' onkeydown='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)'></td>";
			$Contents .= "			<td><input type=text class='textbox' name='options[".$i."][details][".$j."][etc1]' id='options_item_option_etc_".$i."' style='width:70%' value='".$db->dt[option_etc1]."'> <img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if($('.options_item_input_".$i."').length > 1){document.getElementById('options_basic_item_input_table_".$i."').removeChild(this.parentNode.parentNode.parentNode.parentNode);/*this.parentNode.parentNode.parentNode.parentNode.removeNode(true);*/showMessage('options_input_status_area_".$i."','해당옵션 구분정보가 삭제되었습니다.');}else{clearInputBox('options_item_input_".$i."');showMessage('options_input_status_area_".$i."','해당옵션 구분정보가 삭제되었습니다.');}\" title='더블클릭시 해당 라인이 삭제 됩니다.'></td>";
	//	$Contents .= "			<td><input type=text class='textbox' name='options[".$i."][details][".$j."][etc1]' size=28 style='width:85%' value='".$db->dt[option_etc1]."'> ".($j == 0 ? "<!-- 옵션 삭제 -->":"<img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if(document.all.options_item_input_".$i.".length > 1){this.parentNode.parentNode.parentNode.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\" alt='더블클릭시 해당 라인이 삭제 됩니다.'>")."</td>";

		$Contents .= "
											</tr>
										</table>";
					}
			}else{
		$Contents .= "<table width=100% id='options_item_input_0' class='options_item_input_0' idx=0 detail_idx=0 cellspacing=4 cellpadding=0 ><!--ondblclick=\"if(document.all.options_item_input_0.length > 1){this.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\"-->
											<col width='33%'>
											<col width='33%'>
											<col width='34%'>
											<tr>
												<td>
													<input type=hidden name='options[0][details][0][opd_ix]' value=''>
													<input type=text class='textbox' name='options[0][details][0][option_div]' id='options_item_option_div_0' inputid='options_item_option_div_0' style='width:90%;vertical-align:middle' value=''>
												</td>
												<td><input type=text class='textbox' name='options[0][details][0][price]'  style='width:90%' value='' onkeydown='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)'></td>
												<td><input type=text class='textbox' name='options[0][details][0][etc1]' id='options_item_option_etc_0' style='width:70%' value=''><img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if($('.options_item_input_0').length > 1){document.getElementById('options_basic_item_input_table_".$i."').removeChild(this.parentNode.parentNode.parentNode.parentNode);/*this.parentNode.parentNode.parentNode.removeNode(true);*/}else{clearInputBox('options_item_input_0');alert(language_data['sns_goods_input.php']['F'][language]);}\" alt='더블클릭시 해당 라인이 삭제 됩니다.'></td>
											</tr>
										</table>";
			}
$Contents .= "
									</td>
								</tr>
								<tr><td colspan=6 style='background-color:#ffffff;'><div style='height:30px;text-align:right;color:gray;line-height:220%;' id='options_input_status_area_".$i."'></div></td></tr>
							</table>
							";
		}
}else{
	$Contents .= "
							<table width='100%' cellpadding=0 cellspacing=1 bgcolor=silver border='0' id='options_input' class='options_input' idx=0 style='margin-bottom:10px;' ><!--ondblclick=\"if(document.all.options_input.length > 1){this.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\"-->
								<col width='4%'>
								<col width='17%'>
								<col width='*'>
								<col width='19%'>
								<col width='19%'>
								<col width='19%'>
								<tr height=25 bgcolor='#ffffff' align=center>
									<td bgcolor=\"#efefef\" class=small nowrap>
									사용
									</td>
									<td bgcolor=\"#efefef\" class=small nowrap>
									 옵션명
									</td>
									<td bgcolor=\"#efefef\" class=small nowrap>
									 옵션종류
									</td>
									<td bgcolor=\"#efefef\" class=small> 옵션구분 *</td>
									<td bgcolor=\"#efefef\" class=small> 추가가격 *</td>
									<td bgcolor=\"#efefef\" class=small> 기타  </td>
								</tr>
								<tr bgcolor='#ffffff' align=center>
									<td valign='top' style='padding-top:6px;'>
									<input type=hidden name='options[0][option_type]' value='9'>
									<input type=checkbox name='options[0][option_use]' id='options_option_use'  value='1'>
									</td>
									<td valign='top' align=center style='padding-top:4px;'>

									<span id=''><input type=text class='textbox' name='options[0][option_name]' id='option_name' inputid='option_name' style='width:115px;vertical-align:middle' value='$option_div'></span><!-- 옵션 삭제 --></td>
									<td valign='top' align=center style='padding-top:4px;'>
									<select name='options[0][option_kind]' id='option_kind_1' style='font-size:12px;'>
										<option value=s>선택옵션</option>
										<option value=p>가격추가옵션</option>
									</select>

									<!--a onclick=\"copyOptions('options_item_input_0')\" >옵션구분추가</a-->
									<img src='../images/".$admininfo["language"]."/btn_option_detail_add.gif' border=0 align=absmiddle style='cursor:pointer;' onclick=\"copyOptions('options_item_input_0');showMessage('options_input_status_area_0','해당옵션 구분정보가 추가 되었습니다.');\" />
									</td>
									<td colspan=3 id='options_basic_item_input_table_0'>
										<input type=hidden id='options_item_option_div_0' inputid='options_item_option_div_0' value=''><input type=hidden id='options_item_option_etc_0' value=''>
										<table width=100% id='options_item_input_0' class='options_item_input_0' idx=0 detail_idx=0 cellspacing=4 cellpadding=0 ><!--ondblclick=\"if($('.options_item_input_0').length > 1){this.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\"-->
											<col width='33%'>
											<col width='33%'>
											<col width='34%'>
											<tr align='center'>
												<td><input type=text class='textbox' name='options[0][details][0][option_div]' id='options_item_option_div_0' inputid='options_item_option_div_0' style='width:90%;vertical-align:middle' value='$option_div'></td>
												<td><input type=text class='textbox' name='options[0][details][0][price]'  style='width:90%' value='$option_price' onkeydown='onlyEditableNumber(this)'  onkeyup='onlyEditableNumber(this)'></td>";

$Contents .= "					<td><input type=text class='textbox' name='options[0][details][0][etc1]' id='options_item_option_etc_0' style='width:70%' value='$option_etc1'> <img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if($('.options_item_input_0').length > 1){document.getElementById('options_basic_item_input_table_0').removeChild(this.parentNode.parentNode.parentNode.parentNode);/*this.parentNode.parentNode.parentNode.parentNode.removeNode(true);*/showMessage('options_input_status_area_0','해당옵션 구분정보가 삭제되었습니다.');}else{clearInputBox('options_item_input_0');showMessage('options_input_status_area_0','해당옵션 구분정보가 삭제되었습니다.');}\" title='더블클릭시 해당 라인이 삭제 됩니다.'></td>";

//$Contents .= "					<td><input type=text class='textbox' name='options[0][details][0][etc1]' size=28 style='width:85%' value='$option_etc1'> <!-- 옵션 삭제 --></td>";

$Contents .= "
											</tr>
										</table>
									</td>
								</tr>
								<tr><td colspan=6 style='background-color:#ffffff;'><div style='height:30px;text-align:right;color:gray;line-height:220%;' id='options_input_status_area_0'></div></td></tr>
							</table>
							";
}
$Contents .="<table width='100%' cellpadding=0 cellspacing=0>
							<tr height=30>
							<td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<div style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-4px;'><b> 디스플레이옵션</b> <!--span class=small > <img src='../images/".$admininfo["language"]."/webedit/wtool6_1.gif' align=absmiddle> 이미지를 클릭해서 상품상세 이미지를 등록해주세요</span--></div>")."</td>
							</tr>
							</table>";

$Contents .= "
							<a onclick=\"copyOptions('display_options_input_item')\" ><img src='../images/".$admininfo["language"]."/btn_display_option_detail_add.gif' border=0 align=absmiddle style='margin:0 0 3px 0;'></a> <br>
							<table width='49%' cellpadding=5 cellspacing=1 bgcolor=silver id='display_options_input' class='display_options_input' opt_idx=0 style='margin-bottom:10px'>
								<col width='8%'>
								<col width='42%'>
								<col width='50%'>
								<tr height=25 bgcolor='#ffffff' align=center>
									<td bgcolor=\"#efefef\" class=small>사용</td>
									<td bgcolor=\"#efefef\" class=small> 추가정보명 *</td>
									<td bgcolor=\"#efefef\" class=small> 추가정보내용 *</td>
								</tr>
								<tr bgcolor='#ffffff' align=center>
									<td colspan=3 id='display_options_input_item_td'><input type=hidden id='display_option_title' inputid='display_option_title' value=''>";


if($id)	{
	$sql = "select * from ".TBL_SNS_PRODUCT_DISPLAYINFO." where pid = '".$id."' order by regdate asc ";
	$db->query($sql);
	$display_options = $db->fetchall();
}	else	{
	$display_options = array(
		array('dp_use'=>'1','dp_title'=>'업체명','dp_desc'=>''),
		array('dp_use'=>'1','dp_title'=>'매장안내URL','dp_desc'=>'http://'),
		array('dp_use'=>'1','dp_title'=>'구매조건','dp_desc'=>''),
		array('dp_use'=>'1','dp_title'=>'유효기간','dp_desc'=>''),
		array('dp_use'=>'1','dp_title'=>'이용시간','dp_desc'=>''),
		array('dp_use'=>'1','dp_title'=>'환불조건','dp_desc'=>''),
		array('dp_use'=>'1','dp_title'=>'발행방법','dp_desc'=>''),
		array('dp_use'=>'1','dp_title'=>'사용방법','dp_desc'=>''),
		array('dp_use'=>'1','dp_title'=>'유의사항','dp_desc'=>'')
	);
}
if(count($display_options) > 0){
	for($i=0;$i < count($display_options);$i++){

$Contents .= "			<table width=100% id='display_options_input_item' class='display_options_input_item' opt_idx='".$i."' cellspacing=0 cellpadding=0 >
											<col width='8%'>
											<col width='42%'>
											<col width='50%'>
											<tr align='center'>
												<td height='30'><input type=checkbox name='display_options[".$i."][dp_use]' value='1' ".($display_options[$i][dp_use] == "1" ? "checked":"") ."></td>
												<td><input type=text class='textbox' name='display_options[".$i."][dp_title]' id='display_option_title' inputid='display_option_title' style='width:80%;vertical-align:middle' value='".$display_options[$i][dp_title]."'></td>";

$Contents .= "					<td><input type=text class='textbox' name='display_options[".$i."][dp_desc]'  style='width:85%' value='".$display_options[$i][dp_desc]."'> <img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if($('.display_options_input_item').length > 1){document.getElementById('display_options_input_item_td').removeChild(this.parentNode.parentNode.parentNode.parentNode);/*this.parentNode.parentNode.parentNode.parentNode.removeNode(true);*/}else{clearInputBox('display_options_input_item');}\" alt='더블클릭시 해당 라인이 삭제 됩니다.'></td>";
//$Contents .= "					<td><input type=text class='textbox' name='display_options[".$i."][dp_desc]'  style='width:90%' value='".$display_options[$i][dp_desc]."'> ".($i == 0 ? "<!-- 옵션 삭제 -->":"<img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if(document.all.display_options_input_item.length > 1){this.parentNode.parentNode.removeNode(true);}else{clearInputBox('display_options_input_item');}\" alt='더블클릭시 해당 라인이 삭제 됩니다.'>")." </td>";

$Contents .= "
											</tr>
										</table>";
	}
}else{
	$Contents .= "
										<table width=100% id='display_options_input_item' class='display_options_input_item' opt_idx='0' cellspacing=0 cellpadding=0 ><!--ondblclick=\"if(document.all.display_options_input_item.length > 1){this.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\"-->
											<col width='8%'>
											<col width='42%'>
											<col width='50%'>
											<tr align='center'>
												<td height='30'><input type=checkbox name='display_options[0][dp_use]' value='1' checked></td>
												<td><input type=text class='textbox' name='display_options[0][dp_title]' id='display_option_title' inputid='display_option_title' style='width:90%;vertical-align:middle' value='$option_div'></td>
												<td><input type=text class='textbox' name='display_options[0][dp_desc]'  style='width:85%' value='$option_price'> <img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if($('.display_options_input_item').length > 1){document.getElementById('display_options_input_item_td').removeChild(this.parentNode.parentNode.parentNode.parentNode);/*this.parentNode.parentNode.parentNode.parentNode.removeNode(true);*/}else{clearInputBox('display_options_input_item');}\" title='더블클릭시 해당 라인이 삭제 됩니다.'> </td>
											</tr>
										</table>";
}
$Contents .= "
									</td>

								</tr>
								<!--tr>
									<td></td>
									<td colspan=2 align=right valign=top>
									<input type=image src='../images/".$admininfo["language"]."/btn_ok.gif' aligb=absmiddle border=0>
									<a href=\"javascript:document.forms['optionform'].reset();\"><img src='../images/".$admininfo["language"]."/btn_cancel.gif' aligb=absmiddle border=0></a>
									</td>
								</tr-->
							</table><br>";
/*
$Contents .="<table width='100%' cellpadding=0 cellspacing=0>
					<tr height=30>
					<td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<div style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-4px;'><b> 관련상품등록 </b> <a href=\"javascript:\" onclick=\"ms_productSearch.show_productSearchBox(event,1,'productList_1');\"><img src='/admin/images/btn_goods_search_add.gif' border=0 align=absmiddle></a></div>")."</td>
					</tr>
					</table>";

$Contents .="		<table border=0 cellpadding=0 cellspacing=0 width='100%'>
						<tr bgcolor='#ffffff'>
							<!--td bgcolor=#efefef><img src='/admin/image/ico_dot.gif'> <b>관련상품</b></td-->
							<td >
								<div style='width:100%;padding:5px;' id='group_product_area_1' >".relationProductList($id, "clipart")."</div>
								<div style='clear:both;width:100%;'><span class=small>* 이미지 드레그앤드롭으로 노출 순서를 조정하실수 있습니다.<br />* 더블클릭 시 상품이 개별 삭제 됩니다.</span></div>
							</td>
						</tr>
						<tr bgcolor='#F8F9FA'>
							<td colspan=2>";

$Contents .= "

							</td>
						</tr>
					</table><br>";
*/
$Contents .="<table width='100%' cellpadding=0 cellspacing=0><tr height=30><td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<div style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-1px;'><b> 제품상세정보</b> <span class=small > <img src='../images/".$admininfo["language"]."/webedit/wtool6_1.gif' align=absmiddle> <!--이미지를 클릭해서 상품상세 이미지를 등록해주세요-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'V')."</span><br><input type=checkbox name='goods_desc_copy' id='goods_desc_copy' value='1'><label for='goods_desc_copy'><!--<b>상품상세 이미지  복사</b></label> (체크시 입력한 URL의 이미지를 현재 서버에 복사해 오게 됩니다. 이미지 호스팅을 이용할 경우 체크 하지 마세요.)--> ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'W')."</div>")."</td></tr></table>
		<table width='100%' border='0' cellspacing='0' cellpadding='0' class='input_table_box'>
                    <tr bgcolor='#ffffff'>
			<td width='15%' class='input_box_title'  nowrap> 제품간략소개 *</td>
			<td width='85%' class='input_box_item' colspan=2 style='padding:4px;'><textarea name=\"shotinfo\" style='padding:2px;height:40px;width:98%' class='tline'>".$shotinfo."</textarea></td>
		</tr>
                    <tr>
                      <td height='30' colspan='3'>
						      <table id='tblCtrls' width='100%' border='0' cellspacing='0' cellpadding='0' align='center'>
						        <tr>
						          <td bgcolor='F5F6F5'>
									 	<table width='100%' border='0' cellspacing='0' cellpadding='0'>
						              <tr>
						                <td width='18%' height='56'>
											 	<table width='100%' height='56' border='0' align='center' cellpadding='0' cellspacing='0'>
						                    <tr align='center' valign='bottom'>
						                      <td height='26'><a href='javascript:doBold();' onMouseOver=\"MM_swapImage('editImage1','','../images/".$admininfo["language"]."/webedit/wtool1_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool1.gif' name='editImage1' width='19' height='18' border='0' id='editImage1'></a></td>
						                      <td><a href='javascript:doItalic();' onMouseOver=\"MM_swapImage('editImage2','','../images/".$admininfo["language"]."/webedit/wtool2_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool2.gif' name='editImage2' width='19' height='18' border='0' id='editImage2'></a></td>
						                      <td><a href='javascript:doUnderline();' onMouseOver=\"MM_swapImage('editImage3','','../images/".$admininfo["language"]."/webedit/wtool3_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool3.gif' name='editImage3' width='19' height='18' border='0' id='editImage3'></a></td>
						                    </tr>
						                    <tr>
						                      <td height='3' colspan='3'></td>
						                    </tr>
						                    <tr align='center' valign='top'>
						                      <td height='27'><a href='javascript:doLeft();' onMouseOver=\"MM_swapImage('editImage8','','../images/".$admininfo["language"]."/webedit/wtool8_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool8.gif' name='editImage8' width='19' height='18' border='0' id='editImage8'></a></td>
						                      <td><a href='javascript:doCenter();' onMouseOver=\"MM_swapImage('editImage9','','../images/".$admininfo["language"]."/webedit/wtool9_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool9.gif' name='editImage9' width='19' height='18' border='0' id='editImage9'></a></td>
						                      <td><a href='javascript:doRight();' onMouseOver=\"MM_swapImage('editImage10','','../images/".$admininfo["language"]."/webedit/wtool10_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool10.gif' name='editImage10' width='19' height='18' border='0' id='editImage10'></a></td>
						                    </tr>
						                  </table>
											 </td>
						                <td width='2'><img src='../images/".$admininfo["language"]."/webedit/bar.gif' width='2' height='39' align='absmiddle'></td>
						                <td width='19%'>
											 	<table width='100%' border='0' cellspacing='0' cellpadding='0'>
						                    <tr>
						                      <td width='100%' height='27' align='center' valign='bottom'><a href='javascript:doFont();' onMouseOver=\"MM_swapImage('editImage4','','../images/".$admininfo["language"]."/webedit/wtool4_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool4.gif' name='editImage4' width='84' height='22' border='0' id='editImage4'></a></td>
						                    </tr>
						                    <tr>
						                      <td height='2'></td>
						                    </tr>
						                    <tr>
						                      <td height='27' align='center' valign='top'><a href='javascript:doSize();' onMouseOver=\"MM_swapImage('editImage11','','../images/".$admininfo["language"]."/webedit/wtool11_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool11.gif' name='editImage11' width='84' height='22' border='0' id='editImage11'></a></td>
						                    </tr>
						                  </table>
											 </td>
						                <td width='2'><img src='../images/".$admininfo["language"]."/webedit/bar.gif' width='2' height='39' align='absmiddle'></td>
						                <td width='20%'>
											 	<table width='100%' border='0' cellspacing='0' cellpadding='0'>
						                    <tr>
						                      <td height='27' align='center' valign='bottom'><a href='javascript:doForcol();' onMouseOver=\"MM_swapImage('editImage5','','../images/".$admininfo["language"]."/webedit/wtool5_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool5.gif' name='editImage5' width='95' height='22' border='0' id='editImage5'></a></td>
						                    </tr>
						                    <tr>
						                      <td height='2'></td>
						                    </tr>
						                    <tr>
						                      <td height='27' align='center' valign='top'><a href='javascript:doBgcol();' onMouseOver=\"MM_swapImage('editImage12','','../images/".$admininfo["language"]."/webedit/wtool12_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool12.gif' name='editImage12' width='95' height='22' border='0' id='editImage12'></a></td>
						                    </tr>
						                  </table>
											 </td>
						                <td width='2'><img src='../images/".$admininfo["language"]."/webedit/bar.gif' width='2' height='39' align='absmiddle'></td>
						                <td width='18%'>
											 	<table width='100%' border='0' cellspacing='0' cellpadding='0'>
						                    <tr>
						                      <td height='27' align='center' valign='bottom'><a href='javascript:doImage();' onMouseOver=\"MM_swapImage('editImage6','','../images/".$admininfo["language"]."/webedit/wtool6_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool6.gif' name='editImage6' width='73' height='22' border='0' id='editImage6'></a></td>
						                    </tr>
						                    <tr>
						                      <td height='2'></td>
						                    </tr>
						                    <tr>
						                      <td height='27' align='center' valign='top'><a href='javascript:doTable();' onMouseOver=\"MM_swapImage('editImage13','','../images/".$admininfo["language"]."/webedit/wtool13_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool13.gif' name='editImage13' width='73' height='22' border='0' id='editImage13'></a></td>
						                    </tr>
						                  </table>
											 </td>
						                <td width='2'><img src='../images/".$admininfo["language"]."/webedit/bar.gif' width='2' height='39' align='absmiddle'></td>
						                <td width='25%'>
											 	<table width='100%' border='0' cellspacing='0' cellpadding='0'>
						                    <tr>
						                      <td height='27' align='center' valign='bottom'><a href='javascript:doLink();' onMouseOver=\"MM_swapImage('editImage7','','../images/".$admininfo["language"]."/webedit/wtool7_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool7.gif' name='editImage7' width='74' height='22' border='0' id='editImage7'></a></td>
						                    </tr>
						                    <tr>
						                      <td height='2'></td>
						                    </tr>
						                    <tr>
						                      <td height='27' align='center' valign='top'><a href='javascript:doMultilink();' onMouseOver=\"MM_swapImage('editImage14','','../images/".$admininfo["language"]."/webedit/wtool14_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/wtool14.gif' name='editImage14' width='111' height='22' border='0' id='editImage14'></a></td>
						                    </tr>
						                  </table>
											 </td>
						              </tr>
						            </table>
									 </td>
						        </tr>
						      </table>
							  <table width='100%' border='0' cellspacing='1' cellpadding='0'>
						      <tr>
							  <td bgcolor=#ffffff >
							  <textarea name=\"basicinfo\" style='display:none' >".$basicinfo."</textarea>
						      <input type='hidden' name='content' value=''>
						      <iframe align='right' id='iView' style='width: 100%; height:310; border:0px;' scrolling='YES' hspace='0' vspace='0'></iframe>
							  </td>
							  </tr>
							  </table>
						      <!-- html편집기 메뉴 종료 -->
                      </td>
                    </tr>
                    <tr>
          		       <td colspan='3' bgcolor='#f5f6f5' align='right'>&nbsp;
						      <a href='javascript:doToggleText(document.product_input);' onMouseOver=\"MM_swapImage('editImage15','','../images/".$admininfo["language"]."/webedit/bt_html_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/bt_html.gif' name='editImage15' width='93' height='23' border='0' id='editImage15'></a>
          			      <a href='javascript:doToggleHtml(document.product_input);' onMouseOver=\"MM_swapImage('editImage16','','../images/".$admininfo["language"]."/webedit/bt_source_1.gif',1)\" onMouseOut='MM_swapImgRestore()'><img src='../images/".$admininfo["language"]."/webedit/bt_source.gif' name='editImage16' width='93' height='23' border='0' id='editImage16'></a>
                      </td>
                    </tr>
                  </table><br>";
if ($id != ""){
	$img_view_style = " style='display:block;'";
}else{
	$img_view_style = " style='display:none;''"	;
}
$image_db = new Database;
$image_db->query("select * from ".TBL_SNS_IMAGE_RESIZEINFO." order by idx");
$image_info = $image_db->fetchall();
$Contents = $Contents."	<table width='100%' cellpadding=0 cellspacing=0><tr height=30><td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<div style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-1px;'><b align=absmiddle> 이미지 추가</b> <span class=small align=absmiddle >   ".$image_info[0][width]."*".$image_info[0][height]." <!--이미지를 등록하시면 체크된 작은 이미지는 자동으로 등록됩니다.-->".getTransDiscription(md5($_SERVER["PHP_SELF"]),'X')." </span> <a href=\"javascript:PoPWindow('product_resize.php?mmode=pop',600,600,'brand')\"'><img src='../images/".$admininfo["language"]."/btn_pop_image.gif' align=absmiddle border=0></a></div>")."</td></tr></table>
			<table border=0 cellpadding=5 cellspacing=0 bgcolor=#ffffff width=100%>
				<col width=130>
				<col width=200>
				<col width=*>
				<tr height=1>
					<td colspan=3 class='dot-x'></td>
					<td rowspan=11 style='border:1px solid silver' align=center valign=middle id=viewimg>
					";
				if(file_exists($DOCUMENT_ROOT.PrintImage($admin_config[mall_data_root]."/images/product", $id, "m"))){
					$Contents = $Contents."<img src='".PrintImage($admin_config[mall_data_root]."/images/product", $id, "m")."' onerror=\"this.src='../images/noimage_152_148.gif'\" style='border:1px solid silver' id=chimg>";
				}else{
					$Contents = $Contents."<img src='../images/noimage_152_148.gif' style='border:1px solid silver' id=chimg>";
				}
					$Contents = $Contents."</td></tr>
				<tr bgcolor='#ffffff' height=30>
					<td bgcolor=\"#efefef\" rowspan=2 class=small nowrap><img src='../image/ico_dot.gif' align=absmiddle > ".$image_info[0][width]."*".$image_info[0][height]." *<br><b>이미지복사</b><input type=checkbox name='chk_allimg' value=1 id='copy_allimg' inputid='copy_allimg' onclick='copyImageCheckAll();'><br>
					<b> deepzoom 생성</b><input type=checkbox name='chk_deepzoom' value=1 ></td>
					<td class='small'>
					<input type=file name='allimg' class=textbox size=20 style='font-size:8pt'>
					</td>
					<td width=5% $img_view_style><img src='../images/".$admininfo["language"]."/btn_view_img.gif' onclick=\"ChnageImg('".PrintImage($admin_config[mall_data_root]."/images/product", $id, "b")."');\" style='cursor:pointer'></td>
				</tr>
				<tr height=10><td colspan=1 class='small'>※ ".$image_info[0][width]."*".$image_info[0][height]."
				 <!--이미지 복사를 클릭하시면 나머지 이미지가 복사됩니다.--> ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'Y')."</td></tr>
				<tr height=1><td colspan=3 class='dot-x'></td></tr>
				<tr bgcolor='#ffffff' height=50>
					<td bgcolor=\"#efefef\"  class=small nowrap><img src='../image/ico_dot.gif' align=absmiddle > ".$image_info[1][width]."*".$image_info[1][height]." *<br>이미지복사<input type=checkbox name='chk_mimg' id='copy_img' inputid='copy_img' value=1></td>
					<td><input type=file name='mimg'  class=textbox size=20 style='font-size:8pt'></td>
					<td $img_view_style><img src='../images/".$admininfo["language"]."/btn_view_img.gif' onclick=\"ChnageImg('".PrintImage($admin_config[mall_data_root]."/images/product", $id, "m")."');\" style='cursor:pointer'></td>
				</tr>
				<tr height=1><td colspan=3 class='dot-x'></td></tr>
				<tr bgcolor='#ffffff' height=50>
					<!--td bgcolor=\"#efefef\" ></td-->
					<td bgcolor=\"#efefef\"  class=small nowrap><img src='../image/ico_dot.gif' align=absmiddle > ".$image_info[2][width]."*".$image_info[2][height]." *<br>이미지복사<input type=checkbox name='chk_msimg' id='copy_img' inputid='copy_img' value=1></td>
					<td><input type=file name='msimg'  class=textbox size=20 style='font-size:8pt'></td>
					<td $img_view_style><img src='../images/".$admininfo["language"]."/btn_view_img.gif' onclick=\"ChnageImg('".PrintImage($admin_config[mall_data_root]."/images/product", $id, "ms")."');\" style='cursor:pointer'></td>
				</tr>
				<tr height=1><td colspan=3 class='dot-x'></td></tr>
				<tr bgcolor='#ffffff' height=50>
					<!--td bgcolor=\"#efefef\" ></td-->
					<td bgcolor=\"#efefef\" class=small  nowrap><img src='../image/ico_dot.gif' align=absmiddle >  ".$image_info[3][width]."*".$image_info[3][height]." *<br>이미지복사<input type=checkbox name='chk_simg' id='copy_img' inputid='copy_img' value=1></td>
					<td><input type=file name='simg'  class=textbox size=20 style='font-size:8pt'></td>
					<td $img_view_style><img src='../images/".$admininfo["language"]."/btn_view_img.gif' onclick=\"ChnageImg('".PrintImage($admin_config[mall_data_root]."/images/product", $id, "s")."');\" style='cursor:pointer'></td>
				</tr>
				<tr height=1><td colspan=3 class='dot-x'></td></tr>
				<tr bgcolor='#ffffff' height=50>
					<!--td bgcolor=\"#efefef\" ></td-->
					<td bgcolor=\"#efefef\"  class=small nowrap><img src='../image/ico_dot.gif' align=absmiddle > ".$image_info[4][width]."*".$image_info[4][height]." *<br>이미지복사<input type=checkbox name='chk_cimg' id='copy_img' inputid='copy_img' value=1></td>
					<td><input type=file name='cimg'  class=textbox size=20 style='font-size:8pt'></td>
					<td $img_view_style><img src='../images/".$admininfo["language"]."/btn_view_img.gif' onclick=\"ChnageImg('".PrintImage($admin_config[mall_data_root]."/images/product", $id, "c")."');\" style='cursor:pointer'></td>
				</tr>
				<tr height=1><td colspan=3 class='dot-x'></td></tr>
				<tr bgcolor='#ffffff' height=50>
					<td bgcolor=\"#efefef\"  class=small nowrap>
					<img src='../image/ico_dot.gif' align=absmiddle > 이미지 URL <br>
					</td>
					<td colspan=3>
					<input type=checkbox name='img_url_copy' id='img_url_copy' value=1> <label for='img_url_copy'>URL 이미지복사</label> <img src='../images/".$admininfo["language"]."/btn_view_img.gif' onclick=\"ChnageImg('c','".$id."', '".$admin_config[mall_data_root]."/images/product');\" style='cursor:pointer'><br>
					<input type=text name='bimg_text'  class=textbox style='width:750px;font-size:8pt' value='".$bimg_text."'>
					<div class=small><!-- URL 이미지복사를 체크하시면 입력된 이미지 URL 정보를 바탕으로 이미지가 복사됩니다. 단 해당이미지 서버에서 이미지 복사를 차단한 경우는 이미지 복사가 거부될 수 있습니다.--> ".getTransDiscription(md5($_SERVER["PHP_SELF"]),'J')." </div>
					</td>

				</tr>
				<tr height=1><td colspan=4 class='dot-x'></td></tr>
				<tr height=1></td></tr>
			</table><br>";


$Contents .="<table width='100%' cellpadding=0 cellspacing=0>
							<tr height=30>
							<td style='padding-bottom:10px;'>".colorCirCleBox("#efefef","100%","<div style='padding:5px;padding-left:10px;'><img src='../images/dot_org.gif' align=absmiddle style='position:relative;top:-4px;'><b> 추가이미지 등록 </b> <!--span class=small > <img src='/admin/images/".$admininfo["language"]."/webedit/wtool6_1.gif' align=absmiddle> 이미지를 클릭해서 상품상세 이미지를 등록해주세요</span--></div>")."</td>
							</tr>
							</table>";

$Contents .= "
							<a onclick=\"copyOptions('add_img_input_item')\" style='cursor:pointer;'><img src='../images/".$admininfo["language"]."/btn_addimage_add.gif' border=0 align=absmiddle style='margin:0 0 3px 0;'></a> <br>
							<table width='100%' cellpadding=5 cellspacing=1 bgcolor=silver id='display_options_input' opt_idx=0 style='margin-bottom:10'>
								<!--col width='4%'-->
								<col width='33%'>
								<col width='33%'>
								<col width='34%'>
								<tr height=25 bgcolor='#ffffff' align=center>
									<!--td bgcolor=\"#efefef\" class=small>삭제</td-->
									<td bgcolor=\"#efefef\" class=small> ".$image_info[0][width]."*".$image_info[0][height]." *</td>
									<td bgcolor=\"#efefef\" class=small> ".$image_info[1][width]."*".$image_info[1][height]." *</td>
									<td bgcolor=\"#efefef\" class=small> ".$image_info[4][width]."*".$image_info[4][height]." *</td>
								</tr>
								<tr bgcolor='#ffffff' align=center>
									<td colspan=3>";


$sql = "select * from ".TBL_SNS_ADDIMAGE." where pid = '".$id."' order by regdate asc  ";

$db->query($sql);

$add_images = $db->fetchall();

if($db->total){
	/*
	$Contents .= "
										<table width=100% id='add_img_input_item' class='add_img_input_item' opt_idx=0 cellspacing=4 cellpadding=0><!--ondblclick=\"if(document.all.add_img_input_item.length > 1){this.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\"-->
											<!--col width='3%'-->
											<col width='7%' />
											<col width='26%' />
											<col width='7%' />
											<col width='26%' />
											<col width='7%' />
											<col width='*' />
											<tr align='left'>
												<td></td>
												<td>
													<b >이미지복사</b><input type=checkbox name='addimages[0][add_copy_allimg]' onclick=\"copyAddImageCheckAll('0');\" id='add_copy_allimg_0'  inputid = 'add_copy_allimg_0' value=1 checked>
												</td>
												<td></td>
												<td>
													복사함<input type=checkbox name='addimages[0][add_chk_mimg]' id='add_copy_img_0' value=1 inputid = 'add_copy_img_0' checked>
												</td>
												<td></td>
												<td>
													복사함<input type=checkbox name='addimages[0][add_chk_cimg]' id='add_copy_img_0' value=1 inputid = 'add_copy_img_0' checked>
												</td>
											</tr>
											<tr align='left'>
												<!--td><input type=checkbox name='addimages[0][addbimg]' value='1' checked></td-->
												<td></td>
												<td>
													<input type=file class='textbox' name='addimages[0][addbimg]' style='width:90%;vertical-align:middle' value='$option_div'>
												</td>
												<td></td>
												<td>
													<input type=file class='textbox' name='addimages[0][addmimg]'  style='width:90%' value='$option_price'>
												</td>
												<td></td>
												<td>
													<input type=file class='textbox' name='addimages[0][addcimg]'  style='width:90%' value='$option_price'>
												</td>
											</tr>
											<tr align='left'>
												<td></td>
												<td colspan='4'>
													<b class=small> deepzoom 이미지 생성</b><input type=checkbox name='addimages[0][add_copy_deepzoomimg]' value=1 >
												</td>
												<td align='right'>
													<!-- 옵션 삭제 -->
												</td>
											</tr>
										</table>";
										*/ // 추가 이미지 등록 레이아웃은 copyOptions() 함수안에 있음 kbk
	for($i=0;$i < count($add_images);$i++){
		if(file_exists(PrintImageAdd($DOCUMENT_ROOT.$admin_config[mall_data_root]."/images", $id, $add_images[$i][id], "b"))) {
			$b_exists=1;
		} else {
			$b_exists=0;
		}
		if(file_exists(PrintImageAdd($DOCUMENT_ROOT.$admin_config[mall_data_root]."/images", $id, $add_images[$i][id], "m"))) {
			$m_exists=1;
		} else {
			$m_exists=0;
		}
		if(file_exists(PrintImageAdd($DOCUMENT_ROOT.$admin_config[mall_data_root]."/images", $id, $add_images[$i][id], "c"))) {
			$c_exists=1;
		} else {
			$c_exists=0;
		}
$Contents .= "
										<table width=100% id='add_img_input_item' class='add_img_input_item' opt_idx=".$i." cellspacing=4 cellpadding=0 border=0><!--ondblclick=\"if(document.all.add_img_input_item.length > 1){this.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\"-->
											<!--col width='3%'-->
											<col width='7%' />
											<col width='26%' />
											<col width='7%' />
											<col width='26%' />
											<col width='7%' />
											<col width='*' />
											<tr align='left'>
												<td></td>
												<td>
													<b >이미지복사</b><input type=checkbox name='addimages[".$i."][add_copy_allimg]' inputid = 'add_copy_allimg_".$i."' onclick=\"copyAddImageCheckAll('".$i."');\" id='add_copy_allimg_".$i."' value=1  ".($b_exists==1 ? "checked":"")."> <b style='color:red;'>".($add_images[$i][deepzoom] == 1 ? "deepzoom 사용":"")."</b>
												</td>
												<td></td>
												<td>복사함<input type=checkbox name='addimages[".$i."][add_chk_mimg]' id='add_copy_img_".$i."' inputid = 'add_copy_img_".$i."' value=1 ".($m_exists==1 ? "checked":"")."></td>
												<td></td>
												<td>
													복사함<input type=checkbox name='addimages[".$i."][add_chk_cimg]' id='add_copy_img_".$i."' inputid = 'add_copy_img_".$i."' value=1 ".($c_exists==1 ? "checked":"").">
												</td>
											</tr>
											<tr align='left'>
												<!--td><input type=checkbox name='addimages[".$i."][del]' value='1' checked></td-->
												<input type=hidden  name='addimages[".$i."][ad_ix]' value='".$add_images[$i][id]."' >
												<td align='center'>";
											if($b_exists) {
											$Contents .= "
													<img src='".PrintImageAdd($admin_config[mall_data_root]."/images", $id, $add_images[$i][id], "b")."' width=50 align=absmiddle style='border:1px solid gray'>";
											}
											$Contents .= "
												</td>
												<td>
													<input type=file class='textbox' name='addimages[".$i."][addbimg]' style='width:90%;vertical-align:middle' value='$option_div'>
												</td>
												<td align='center'>";
											if($m_exists) {
											$Contents .= "
												<img src='".PrintImageAdd($admin_config[mall_data_root]."/images", $id, $add_images[$i][id], "m")."' width=50 align=absmiddle style='border:1px solid gray'>";
											}
											$Contents .= "
												</td>
												<td>
													<input type=file class='textbox' name='addimages[".$i."][addmimg]'  style='width:90%' value='$option_price'>
												</td>
												<td align='center'>";
											if($c_exists) {
											$Contents .= "
												<img src='".PrintImageAdd($admin_config[mall_data_root]."/images", $id, $add_images[$i][id], "c")."' width=50 align=absmiddle style='border:1px solid gray'>";
											}
											$Contents .= "
												</td>
												<td>
													<input type=file class='textbox' name='addimages[".$i."][addcimg]'  style='width:90%' value='$option_price'>
												</td>
											</tr>
											<tr align='left'>
												<td></td>
												<td colspan='4'>
													<b class=small> deepzoom 이미지 생성</b><input type=checkbox name='addimages[".$i."][add_copy_deepzoomimg]' value=1 >
												</td>
												<td align='right'>
													".($i+1 == 0 ? "<!-- 옵션 삭제 -->":"<img src='../images/i_close.gif' align=absmiddle style='cursor:pointer;' ondblclick=\"if($('.add_img_input_item').length > 1){\$('.add_img_input_item')[".$i."].parentNode.removeChild(\$('.add_img_input_item')[".$i."]);/*this.parentNode.removeNode(true);*/}else{alert(language_data['sns_goods_input.php']['F'][language]);}\" title='더블클릭시 해당 라인이 삭제 됩니다.'>")."
												</td>
											</tr>
										</table>";
		}
}else{
	$Contents .= "
										<table width=100% id='add_img_input_item' class='add_img_input_item' opt_idx=0 cellspacing=4 cellpadding=0 ><!--ondblclick=\"if(document.all.add_img_input_item.length > 1){this.removeNode(true);}else{alert(language_data['sns_goods_input.php']['F'][language]);}\"-->
											<!--col width='3%'-->
											<col width='7%' />
											<col width='26%' />
											<col width='7%' />
											<col width='26%' />
											<col width='7%' />
											<col width='*' />
											<tr align='left'>
												<td></td>
												<td><b >이미지복사</b><input type=checkbox name='addimages[0][add_copy_allimg]' onclick=\"copyAddImageCheckAll('0');\" id='add_copy_allimg_0' inputid = 'add_copy_allimg_0' value=1 checked></td>
												<td></td>
												<td>복사함<input type=checkbox  name='addimages[0][add_chk_mimg]' id='add_copy_img_0' inputid = 'add_copy_img_0' value=1  checked></td>
												<td></td>
												<td>복사함<input type=checkbox  name='addimages[0][add_chk_cimg]' id='add_copy_img_0' inputid = 'add_copy_img_0' value=1  checked></td>
											</tr>
											<tr align='left'>
												<!--td><input type=checkbox name='addimages[0][addbimg]' value='1' checked></td-->
												<td></td>
												<td>
													<input type=file class=textbox name='addimages[0][addbimg]' style='width:90%;vertical-align:middle' value='$option_div'>
												</td>
												<td></td>
												<td>
													<input type=file class=textbox name='addimages[0][addmimg]'  style='width:90%' value='$option_price'>
												</td>
												<td></td>
												<td>
													<input type=file class=textbox name='addimages[0][addcimg]'  style='width:90%' value='$option_price'>
												</td>
											</tr>
											<tr align='left'>
												<td></td>
												<td colspan='4'>
													<b class=small> DeepZoom 생성</b><input type=checkbox name='addimages[0][add_copy_deepzoomimg]' value=1>
												</td>
												<td align='right'><!-- 옵션 삭제 --></td>
											</tr>
										</table>";
}
$Contents .= "
									</td>

								</tr>
							</table><br>";


/*
$help_text = "
<table cellpadding=0 cellspacing=0 class='small'  >
	<col width=8>
	<col width=*>
	<tr><td valign=top><img src='/admin/image/icon_list.gif' ></td><td class='small' ><b>792*536 이미지</b>를 등록한후 이미지 복사를 클릭하시고 저장하시면 <u>400*270, 200*135, 100*76, 50×34</u> 이미지가 자동으로 생성됩니다</td></tr>
	<tr><td valign=top><img src='/admin/image/icon_list.gif' ></td><td class='small' >별도의 이미지 복사를 원하시면 이미지복사 체크를 푸신 상태에서 원하시는 이미지를 찾아서 등록하시면 됩니다</td></tr>
	<tr><td valign=top><img src='/admin/image/icon_list.gif' ></td><td class='small' >상품정보의 일괄 관리를 위해서 상품상세 이미지의 경우 외부사이트에서 HTML을 복사해서 넣은경우 복사해온 <u>서버측에서 외부사이트 링크가 허용된 경우</u> <b>이미지가 자동</b>으로 복사되게 됩니다</td></tr>
	<tr><td valign=top><img src='/admin/image/icon_list.gif' ></td><td class='small' >제품 상세정보페이지에 다른 사이트에 있는 이미지를 붙여 넣고 싶은경우 다른 사이트에 있는 이미지를 드래그해서 넣으면 자동으로 복사 됩니다<br>단, 이미지 원본측에 이미지 복사가 허용된 경우에 한함</td></tr>
</table>
";*/
$help_text = getTransDiscription(md5($_SERVER["PHP_SELF"]),'I');
$Contents .= HelpBox("상품등록관리", $help_text);



$Contents = $Contents."
			<table width='100%'>
			<tr height=30 align=left><td width=500></td>";


if ($id == "" || $mode == "copy"){
	$Contents .= "<td align=right>";
	if(checkMenuAuth(md5($_SERVER["PHP_SELF"]),"C")){
		$Contents .= "<img src='../images/".$admininfo["language"]."/b_save.gif' border=0 align=absmiddle style='cursor:pointer' onclick=\"ProductInput(document.product_input,'insert');\">";
	}
	$Contents .= "</td>";
}else{
	$Contents .= "<td align=right>";
	if(checkMenuAuth(md5($_SERVER["PHP_SELF"]),"U")){
		$Contents .= "<img src='../images/".$admininfo["language"]."/b_save.gif' border=0 align=absmiddle style='cursor:pointer' onclick=\"ProductInput(document.product_input,'update')\"> ";
	}
	if(checkMenuAuth(md5($_SERVER["PHP_SELF"]),"D")){
		$Contents .= "<img src='../images/".$admininfo["language"]."/b_del.gif' border=0 align=absmiddle style='cursor:pointer' onclick=\"ProductInput(document.product_input,'delete')\">";
	}
	$Contents .= "</td>";
}
$Contents .= "
			<!--td><img src='../images/".$admininfo["language"]."/b_save.gif' border=0 align=absmiddle style='cursor:pointer' onclick=\"ProductInput(document.product_input,'insert');\"></td>
			<td><img src='../images/".$admininfo["language"]."/b_edit.gif' border=0 align=absmiddle style='cursor:pointer' onclick=\"ProductInput(document.product_input,'update')\"></td>
			<td><img src='../images/".$admininfo["language"]."/b_del.gif' border=0 align=absmiddle style='cursor:pointer' onclick=\"ProductInput(document.product_input,'delete')\"-->
			</td></tr>
			</table>
			</form>";
if($_relation_view_type =="small"){
	$ajax_add_string = "tag:'img',overlap:'horizontal',constraint:false, ";
}

if ($id && $mode != "copy"){
$Contents .= "
<script type='text/javascript'>
/*
Sortable.create('sortlist',
{
	$ajax_add_string
	onUpdate: function()
	{
		//alert(Sortable.serialize('sortlist'));
		new Ajax.Request('/admin/product/product_input.act.php',
		{
			method: 'POST',
			parameters: Sortable.serialize('sortlist')+'&act=vieworder_update&pid=$id',
			onComplete: function(transport){
			//alert(transport.responseText);
			}
		});
	}
});
*/
</script>";
}

/*
			<div class=box id=img3  style='Z-INDEX: 110; FILTER: revealTrans(duration=1); LEFT: 10px; VISIBILITY: hidden; WIDTH: 200px; POSITION: absolute; TOP: 10px'>
				<table cellpadding=0 cellspacing=0 bgcolor=#ffffff style='border:1px solid #000000'>
				<tr height=30 align=center bgcolor='#efefef'><td onclick='outTip(img3)'>상품카테고리정보</td></tr>
				<tr><td>".Category()."</td></tr>
				</table>
				</div>
			</div>
			<br>";
*/



$Script = "
<!--script type='text/javascript' src='./js/ui/ui.datepicker.js'></script>
<script type='text/javascript' src='./js/ui/jquery-ui-timepicker-addon-0.5.js'></script-->
<script language='JavaScript' src='../js/scriptaculous.js'></script>
<script language='JavaScript' src='../webedit/webedit.js'></script>
<script Language='JavaScript' src='../include/zoom.js'></script>
<!--script Language='JavaScript' src='addoption.js'></script-->
<!--script language='JavaScript' src='../js/dd.js'></script-->
<script language='JavaScript' src='../js/mozInnerHTML.js'></script>
<script type='text/javascript' src='../marketting/relationAjaxForEvent.js'></script>
<script Language='JavaScript' src='../include/DateSelect.js'></script>
<script Language='JavaScript' src='goods_input.js'></script>
<!--script Language='JavaScript' src='buyingService.js'></script-->
$Script";
$P = new LayOut();
$P->addScript = $Script;
if ($id != ""){
	if ($admininfo[admin_level] == 9){
		$P->OnloadFunction = "init();calcurate_maginrate(document.product_input);calcurate_margin(document.product_input);deliveryTypeView('".$delivery_policy."')";
	}else{
		$P->OnloadFunction = "init();calcurate_maginrate(document.product_input);calcurate_margin(document.product_input);deliveryTypeView('".$delivery_policy."')";
	}
}else{
	$P->OnloadFunction = "init();";
}

$P->strLeftMenu = sns_menu();
$P->Navigation = "소셜커머스 > 상품등록관리";
$P->title = "상품등록관리";
$P->strContents = $Contents;
echo $P->PrintLayOut();


function search_select($pid){
$listdb = new Database;

$listdb->query("SELECT m.id,m.myshopping_desc,s.disp  FROM myshopping m left outer join search_relation s on m.id = s.search_id and s.pid = '$pid'");



	$mstr = "	<select name=search_id[] style='height:130px;width:630px;'multiple>";


	for($i=0;$i < $listdb->total;$i++){
	$listdb->fetch($i);
		if($listdb->dt[disp] == 1){
			$mstr = $mstr."		<option value='".$listdb->dt[id]."' selected>".($i+1).". ".$listdb->dt[myshopping_desc]." ".$listdb->dt[disp]."</option>";
		}else{
			$mstr = $mstr."		<option value='".$listdb->dt[id]."'>".($i+1).". ".$listdb->dt[myshopping_desc]." ".$listdb->dt[disp]."</option>";
		}
	}


	$mstr = $mstr."  </select>";

	return $mstr;

}


function PrintRootNode($cname){

	$cname = str_replace("\"","&quot;",$cname);
	$cname = str_replace("'","&#39;",$cname);

	$vPrintRootNode = "var rootnode = new TreeNode('$cname', '../resources/ServerMag_Etc_Root.gif','../resources/ServerMag_Etc_Root.gif');/n
			rootnode.expanded = true;\n\n";

	return $vPrintRootNode;
}

function PrintNode($cname,$cid,$depth)
{
	global $id;
	$cid1 = substr($cid,0,3);
	$cid2 = substr($cid,3,3);
	$cid3 = substr($cid,6,3);
	$cid4 = substr($cid,9,3);
	$cid5 = substr($cid,12,3);

	$cname = str_replace("\"","&quot;",$cname);
	$cname = str_replace("'","&#39;",$cname);

	return "	var node$cid = new TreeNode('$cname', '../resources/Common_TreeNode_CodeManage.gif', '../resources/Common_TreeNode_CodeManage.gif');
	node$cid.expanded = true;
	node$cid.action = \"setCategory('insert','$cname','$cid',$depth,'$id')\";
	rootnode.addNode(node$cid);\n\n";
}

function PrintGroupNode($cname,$cid,$depth)
{
	global $id;
	$cid1 = substr($cid,0,3);
	$cid2 = substr($cid,3,3);
	$cid3 = substr($cid,6,3);
	$cid4 = substr($cid,9,3);
	$cid5 = substr($cid,12,3);

	$Parentdepth = $depth - 1;

	if ($depth+1 == 1){
		$cid1 = "000";
	}else if($depth+1 == 2){
		$cid2 = "000";
	}else if($depth+1 == 3){
		$cid3 = "000";
	}else if($depth+1 == 4){
		$cid4 = "000";
	}else if($depth+1 == 3){
		$cid5 = "000";
	}

	$parent_cid = "$cid1$cid2$cid3$cid4$cid5";

	if ($depth ==1){
		$ParentNodeCode = "node$parent_cid";
	}else if($depth ==2){
		$ParentNodeCode = "groupnode$parent_cid";
	}else if($depth ==3){
		$ParentNodeCode = "groupnode$parent_cid";
	}

	$cname = str_replace("\"","&quot;",$cname);
	$cname = str_replace("'","&#39;",$cname);

	return "		var groupnode$cid = new TreeNode('$cname',TREE_FOLDER_CLOSED_IMG,TREE_FOLDER_OPEN_IMG);
		groupnode$cid.tooltip = '$cname';
		groupnode$cid.id ='nodeid$cid';
		groupnode$cid.action = \"setCategory('insert','$cname','$cid',$depth,'$id')\";
		$ParentNodeCode.addNode(groupnode$cid);\n\n";
}

function Category()
{
	global $id;
	global $db;

$cate = "
<script language=\"JavaScript\" src=\"../include/manager.js\"></script>
<script language=\"JavaScript\" src=\"../include/Tree.js\"></script>
<script>

/*	 Create Tree		*/
	var tree = new Tree();
	tree.color = \"black\";
	tree.bgColor = \"white\";
	tree.borderWidth = 0;


/*	Create Root node	*/
	var rootnode = new TreeNode(\"상품카테고리\", \"../resources/ServerMag_Etc_Root.gif\",\"../resources/ServerMag_Etc_Root.gif\");
	rootnode.action = \"setCategory('상품카테고리','000000000000000',-1,0,'".$id."')\";
	rootnode.expanded = true;";



$db->query("SELECT * FROM ".TBL_SNS_CATEGORY_INFO." order by vlevel1, vlevel2, vlevel3, vlevel4, vlevel5");

$total = $db->total;
for ($i = 0; $i < $db->total; $i++)
{

	$db->fetch($i);

	if ($db->dt["depth"] == 0){
		$cate = $cate. PrintNode($db->dt["cname"],$db->dt["cid"],$db->dt["depth"]);
	}else if($db->dt["depth"] == 1){
		$cate = $cate. PrintGroupNode($db->dt["cname"],$db->dt["cid"],$db->dt["depth"]);
	}else if($db->dt["depth"] == 2){
		$cate = $cate. PrintGroupNode($db->dt["cname"],$db->dt["cid"],$db->dt["depth"]);
	}else if($db->dt["depth"] == 3){
		$cate = $cate. PrintGroupNode($db->dt["cname"],$db->dt["cid"],$db->dt["depth"]);
	}else if($db->dt["depth"] == 4){
		$cate = $cate. PrintGroupNode($db->dt["cname"],$db->dt["cid"],$db->dt["depth"]);
	}
}

$cate = $cate."	tree.addNode(rootnode);";
$cate = $cate."
</script>
<form>
<div id=TREE_BAR style=\"margin:5;\">
<script>
tree.draw();
tree.nodes[0].select();
</script>
</div>
</form>";

return $cate;
}

function PrintRelation($pid){
	global $db, $admininfo ;

	$sql = "select c.cid,c.cname,c.depth,r.basic, r.rid, r.regdate  from ".TBL_SNS_PRODUCT_RELATION." r, ".TBL_SNS_CATEGORY_INFO." c where pid = '$pid' and c.cid = r.cid ";


	$db->query($sql);

	$mString = "<table width=100% cellpadding=0 cellspacing=0 id=objCategory>
						";

	if ($db->total == 0){
		//$mString = $mString."<tr bgcolor=#ffffff height=45><td colspan=5 align=center>선택된 카테고리 정보가 없습니다.</td></tr>";
	}else{
		$i=0;
		for($i=0;$i<$db->total;$i++){
			$db->fetch($i);
			$parent_cname = GetParentCategory($db->dt[cid],$db->dt[depth],"sns");
			$mString .= "<tr>
				<td class='table_td_white small ' width='5' height='25'><input type='text' name='category[]' id='_category' value='".$db->dt[cid]."' style='display:none'></td>
				<td class='table_td_white small' width='50'><input type='radio' name='basic' value='".$db->dt[cid]."' ".($db->dt[basic] == 1 ? "checked":"")."></td>
				<td class='table_td_white small ' width='*'>".($parent_cname != "" ? $parent_cname." > ":"").$db->dt[cname]."</td>
				<td class='table_td_white' width='100'><!--a href=\"JavaScript:void(0)\" onClick='category_del(this.parentNode.parentNode)'--><img src='../images/".$admininfo["language"]."/btc_del.gif' border=0 align='absmiddle' onClick='category_del(this.parentNode.parentNode)' style='cursor:pointer;' /><!--/a--></td>
				</tr>";
		}
	}
	//$mString .= "<tr align=center bgcolor=silver height=1><td colspan=5></td></tr>";
	$mString = $mString."</table>";

	return $mString;
}


function PrintAddImage($pid){
	global $db, $admin_config;

	$sql = "select id from ".TBL_SNS_ADDIMAGE." a where pid = '$pid' ";
	$db->query($sql);

	$mString = "<table cellpadding=5 cellspacing=0 width='100%' bgcolor=silver>";
	$mString = $mString."<tr align=center bgcolor=#efefef height=25>
						<td class='s_td'>번호</td>
						<td  class='m_td' colspan=2>클립아트 ID</td>
						<td  class='m_td'>중간이미지</td>
						<td  class='m_td'>큰이미지</td>
						<td  class='e_td'>삭제</td>
					</tr>";
	if ($db->total == 0){
		$mString = $mString."<tr bgcolor=#ffffff height=80><td colspan=6 align=center>입력된 추가이미지가 없습니다.</td></tr>";
	}else{
		$i=0;
		for($i=0;$i<$db->total;$i++){
			$db->fetch($i);
			$mString = $mString."<tr height=25 bgcolor=#ffffff><td  align=center  class=small>".($i+1)."</td><td  ><img src='".$admin_config[mall_data_root]."/images/addimg/c_".$db->dt[id]."_add.gif' align=absmiddle style='border:1px solid gray'></td><td  class=small><a href=\"javascript:AddImageView('".$admin_config[mall_data_root]."/images/addimg/c_".$db->dt[id]."_add.gif')\">c_".$db->dt[id]."_add.gif</a></td><td  class=small><a href=\"javascript:AddImageView('".$admin_config[mall_data_root]."/images/addimg/m_".$db->dt[id]."_add.gif')\">m_".$db->dt[id]."_add.gif</a></td><td><a href=\"javascript:AddImageView('".$admin_config[mall_data_root]."/images/addimg/b_".$db->dt[id]."_add.gif')\">b_".$db->dt[id]."_add.gif</a></td><td align=center  class=small><a href=\"JavaScript:deleteAddimage('delete','".$db->dt[id]."','$pid')\"><img src='../image/btc_del.gif'></a></td></tr>";
			$mString = $mString."<tr height=1><td colspan=6 class='dot-x'></td></tr>";
		}
	}
	$mString = $mString."</table>";

	return $mString;
}


function PrintOption($pid, $opn_ix =''){
	global $db;

	//$sql = "select id, option_div,option_price, option_m_price, option_d_price, option_a_price, option_useprice, option_stock, option_safestock,option_etc1 from ".TBL_SNS_PRODUCT_OPTIONS_DETAIL." a where pid = '$pid' and opn_ix = '$opn_ix' order by id asc";
	$sql = "select id, option_div,option_price, option_stock, option_safestock,option_etc1 from ".TBL_SNS_PRODUCT_OPTIONS_DETAIL." a where pid = '$pid' and opn_ix = '$opn_ix' order by id asc";
	$db->query($sql);

	$mString = "<table cellpadding=4 cellspacing=0 width=100% bgcolor=silver>";
	$mString .=  "<tr height=1><td colspan=9 ></td></tr>";
	$mString = $mString."<tr align=center bgcolor=#efefef height=25><td rowspan=3 class=small>번호</td><td rowspan=3 class=small>옵션구분</td><td colspan=4 class=small>옵션가격</td><td colspan=2 class=small>옵션재고</td><td rowspan=3 class=small>기타(색상)</td><td rowspan=3 class=small>관리</td></tr>";
	$mString .=  "<tr height=1><td colspan=6 class='dot-x'></td></tr>";
	$mString = $mString."<tr align=center bgcolor=#efefef height=25><td class=small>비회원가</td><td class=small>회원가</td><td class=small>딜러가</td><td class=small>대리점가</td><td class=small>재고</td><td class=small>안전재고</td></tr>";
	$mString .=  "<tr height=1><td colspan=9 ></td></tr>";
	if ($db->total == 0){
		$mString = $mString."<tr bgcolor=#ffffff height=120><td colspan=10 align=center class=small>수정 /  추가 하시고자 하는 옵션이름을 선택해주세요</td></tr>";
	}else{
		$i=0;
		for($i=0;$i<$db->total;$i++){
			$db->fetch($i);
			/*
			$mString = $mString."<tr height=25 bgcolor=#ffffff>
			<td  align=center>".($i+1)."</td>
			<td><a href=\"JavaScript:UpdateOption('".$db->dt[id]."','".str_replace("\"","&quot;",$db->dt[option_div])."','".$db->dt[option_price]."','".$db->dt[option_m_price]."','".$db->dt[option_d_price]."','".$db->dt[option_a_price]."','".$db->dt[option_stock]."','".$db->dt[option_safestock]."','".$db->dt[option_etc1]."')\" ><u>".$db->dt[option_div]."</u></a></td>
			<td>".$db->dt[option_price]."</td>
			<td>".$db->dt[option_m_price]."</td>
			<td>".$db->dt[option_d_price]."</td>
			<td>".$db->dt[option_a_price]."</td>
			<td>".$db->dt[option_stock]."</td>
			<td>".$db->dt[option_safestock]."</td>
			<td>".$db->dt[option_etc1]."</td>
			<td align=center>
				<a href=\"JavaScript:deleteOption('delete','".$db->dt[id]."','$pid')\"><img  src='../images/".$admininfo["language"]."/btc_del.gif' border=0></a>
			</td>
			</tr>
			<tr height=1><td colspan=9 class='dot-x'></td></tr>
			";
			*/
			$mString = $mString."<tr height=25 bgcolor=#ffffff>
			<td  align=center>".($i+1)."</td>
			<td><a href=\"JavaScript:UpdateOption('".$db->dt[id]."','".str_replace("\"","&quot;",$db->dt[option_div])."','".$db->dt[option_price]."','".$db->dt[option_stock]."','".$db->dt[option_safestock]."','".$db->dt[option_etc1]."')\" ><u>".$db->dt[option_div]."</u></a></td>
			<td>".$db->dt[option_price]."</td>
			<td>".$db->dt[option_stock]."</td>
			<td>".$db->dt[option_safestock]."</td>
			<td>".$db->dt[option_etc1]."</td>
			<td align=center>
				<a href=\"JavaScript:deleteOption('delete','".$db->dt[id]."','$pid')\"><img  src='../images/".$admininfo["language"]."/btc_del.gif' border=0></a>
			</td>
			</tr>
			<tr height=1><td colspan=9 class='dot-x'></td></tr>
			";
		}
	}
	$mString = $mString."</table>";

	return $mString;
}


function PrintDisplayOption($pid){
	global $db;

	$sql = "select * from ".TBL_SNS_PRODUCT_DISPLAYINFO." a where pid = '$pid' ";
	$db->query($sql);

	$mString = "<table cellpadding=4 cellspacing=0 width=100% bgcolor=silver>";
	$mString = $mString."<tr align=center bgcolor=#efefef height=25><td class='s_td small' >번호</td><td class='m_td small' >추가정보명</td><td class='m_td small' >추가정보내용</td><td class='e_td small' >관리</td></tr>";
	if ($db->total == 0){
		$mString = $mString."<tr bgcolor=#ffffff height=50><td colspan=9 align=center class=small >입력된 상품추가정보 항목이  없습니다.</td></tr>";
	}else{
		$i=0;
		for($i=0;$i<$db->total;$i++){
			$db->fetch($i);
			$mString = $mString."<tr height=25 bgcolor=#ffffff align=center>
			<td  class=small >".($i+1)."</td>
			<td class=small ><a href=\"JavaScript:UpdateDisplayOption('".$db->dt[dp_ix]."','".$db->dt[dp_title]."','".$db->dt[dp_desc]."')\" ><u>".$db->dt[dp_title]."</u></a></td>
			<td class=small >".$db->dt[dp_desc]."</td>
			<td align=center>
				<a href=\"JavaScript:deleteDisplayOption('delete','".$db->dt[dp_ix]."','$pid')\"><img  src='../images/".$admininfo["language"]."/btn_si_remove.gif' border=0></a>
			</td>
			</tr>
			<tr height=1><td colspan=4 class='dot-x'></td></tr>
			";
		}
	}
	$mString = $mString."</table>";

	return $mString;
}

function _PrintOption($pid){
	global $db;

	$sql = "select id, option_div,option_price, option_useprice, option_stock from ".TBL_SNS_PRODUCT_OPTIONS_DETAIL." a where pid = '$pid' ";
	$db->query($sql);

	$mString = "<table cellpadding=2 cellspacing=1 width=100% bgcolor=silver>";
	$mString = $mString."<tr align=center bgcolor=#efefef height=25><td>번호</td><td>옵션이름</td><td>옵션구분</td><td>옵션가격</td><td>옵션재고</td><td>옵션표시</td><td>관리</td></tr>";
	if ($db->total == 0){
		$mString = $mString."<tr bgcolor=#ffffff height=40><td colspan=7 align=center>입력된 옵션이 없습니다.</td></tr>";
	}else{
		$i=0;
		for($i=0;$i<$db->total;$i++){
			$db->fetch($i);
			$mString = $mString."<tr height=25 bgcolor=#ffffff>
			<td  align=center>".($i+1)."</td><td>".$db->dt[option_name]."</td><td>".$db->dt[option_div]."</td><td>".$db->dt[option_price]."</td><td>".$db->dt[option_stock]."</td>
			<td>".PrintSelect($db->dt[option_name],$db->dt[option_div],$db->dt[option_price],$db->dt[option_useprice])."</td>
			<td align=center>
				<a href=\"JavaScript:UpdateOption('".$db->dt[id]."','".$db->dt[option_name]."','".$db->dt[option_div]."','".$db->dt[option_price]."','".$db->dt[option_stock]."')\">○</a>
				<a href=\"JavaScript:deleteOption('delete','".$db->dt[id]."','$pid')\">×</a>
			</td>
			</tr>";
		}
	}
	$mString = $mString."</table>";

	return $mString;
}

function PrintSelect($op_name,$op_div,$op_price,$op_useprice)
{
	$aryOp_div = explode("|",$op_div);
	$aryOp_price = explode("|",$op_price);
	$size = count($aryOp_div);

	$SelectString = "<Select>";

	if ($size == 0){
		$SelectString = $SelectString."<option>옵션이 없습니다.</option>";
	}else{
		if($op_useprice ==1){
			for($i=0; $i < $size; $i++){
				$SelectString = $SelectString."<option value='".$aryOp_div[$i]."'>".$aryOp_div[$i]."</option>";
			}
		}else{
			for($i=0; $i < $size; $i++){
				$SelectString = $SelectString."<option value='".$aryOp_price[$i]."'>".$aryOp_div[$i]."</option>";
			}
		}
	}

	$SelectString = $SelectString."</Select>";

	return $SelectString;
}


function SellState($vstate){
	global $admininfo;

	if($admininfo[admin_level] == 9){
		$mstring = "
		<Select name=state class=small>
			<option value=0 ".($vstate == 0 ? "selected":"").">일시품절</option>
			<option value=1 ".(($vstate == 1 || $vstate == "") ? "selected":"").">판매중</option>";
		if($admininfo[mall_use_multishop]){
		$mstring .= "<option value=6 ".($vstate == 6 ? "selected":"").">입점업체 등록신청</option>";
		}
		$mstring .= "</Select>";
	}else if($admininfo[admin_level] == 8){
		$mstring = "
		<Select name=state>
			<option value=0 ".($vstate == 0 ? "selected":"").">일시품절</option>";
		if ($vstate == 1 ){
		$mstring .= "<option value=1 ".($vstate == 1 ? "selected":"").">판매중</option>";
		}
		if($admininfo[mall_use_multishop]){
		$mstring .= "<option value=6 ".(($vstate == 6 || $vstate == "") ? "selected":"").">입점업체 등록신청</option>";
		}
		$mstring .= "</Select>";
	}
	return $mstring;
}


function displayProduct($disp){
return "
<input type='radio' name='disp'  id='disp_6' value='6' ".ReturnStringAfterCompare($disp, "6", " checked")."><label for='disp_6'>노출안함</label>
<input type='radio' name='disp'  id='disp_5' value='5' ".ReturnStringAfterCompare($disp, "5", " checked")."><label for='disp_5'>노출함</label>";
}





function relationProductList($pid, $disp_type=""){

	global $start,$page, $orderby, $admin_config, $erpid;

	$max = 105;
	$group_code = 1;
	if ($page == ''){
		$start = 0;
		$page  = 1;
	}else{
		$start = ($page - 1) * $max;
	}

	$db = new Database;

	/*
	$db->query("SELECT distinct p.id,p.pname, p.sellprice,  p.reserve, rp_ix FROM ".TBL_SNS_PRODUCT." p, ".TBL_SNS_PRODUCT_RELATION." rp where p.id = rp.rp_pid and rp.pid = '$pid' and p.disp = 1   ");
	$total = $db->total;
	*/
	$db->query("SELECT distinct p.id, p.pcode, p.shotinfo, p.pname, p.sellprice,  p.reserve, rp_ix  FROM ".TBL_SNS_PRODUCT." p, ".TBL_SNS_RELATION_PRODUCT." rp where p.id = rp.rp_pid and rp.pid = '$pid'  and p.disp = 1 order by rp.vieworder asc limit $start,$max");

	if ($db->total == 0){
		if($disp_type == "clipart"){
			$mString = '<ul id="productList_1" name="productList" class="productList"></ul>';
		}
	}else{
		$i=0;
		if($disp_type == "clipart"){
			$mString = '<ul id="productList_1" name="productList" class="productList"></ul>'."\n";
			$mString .= '<script>'."\n";
			$mString .= 'ms_productSearch.groupCode = 1'.";\n";
			for($i=0;$i<$db->total;$i++){
				$db->fetch($i);
				$mString .= 'ms_productSearch._setProduct("productList_1", "M", "'.$db->dt['id'].'", "'.PrintImage($admin_config[mall_data_root]."/images/product", $db->dt['id'], "c").'", "'.addslashes(addslashes(trim($db->dt['pname']))).'", "'.addslashes(addslashes(trim($db->dt['brand_name']))).'", "'.$db->dt['sellprice'].'");'."\n";

			}
			$mString .= '</script>'."\n";
		}
	}


	return $mString;

}





function MakerList($company, $cid, $return_type ="")
{
//global $db;

	$mdb = new Database;

	if($cid){
		$mdb->query("SELECT * FROM ".TBL_SNS_COMPANY." where disp=1 and cid = '$cid' order by company_name asc");
	}else{
		$mdb->query("SELECT * FROM ".TBL_SNS_COMPANY." where disp=1 order by company_name asc");
	}

	$bl = "<Select name='company' class=small>";
	if ($mdb->total == 0)	{
		$bl = $bl."<Option>등록된 제조사가 없습니다.</Option>";
	}else{
		if($return_type == ""){
			$bl = $bl."<Option value=''>제조사 선택</Option>";
			for($i=0 ; $i <$mdb->total ; $i++)
			{
				$mdb->fetch($i);
				if ($company == $mdb->dt[company_name]){
					$strSelected = "Selected";
				}else{
					$strSelected = "";
				}

				$bl = $bl."<Option value='".$mdb->dt[company_name]."' $strSelected>".$mdb->dt[company_name]."</Option>";

			}
		}else{
			for($i=0 ; $i <$mdb->total ; $i++)
			{
				$mdb->fetch($i);
				if ($brand == $mdb->dt[c_ix]){
					return $mdb->dt[comapny_name];
				}
			}
		}
	}

	$bl = $bl."</Select>";

	return $bl;
}

function PrintOptionName($pid, $select_opn_ix)
{
	$mdb = new Database;
	$mdb->query("SELECT * FROM ".TBL_SNS_PRODUCT_OPTIONS." where pid ='$pid'");

	$SelectString = "<Select name='opn_ix' onchange=\"ChangeOptionName('$pid', this);\">";

	if ($mdb->total){
			$SelectString = $SelectString."<option value=''>옵션이름 선택</option>";
		for($i=0; $i < $mdb->total; $i++){
			$mdb->fetch($i);
			$SelectString = $SelectString."<option value='".$mdb->dt[opn_ix]."' option_kind='".$mdb->dt[option_kind]."'>".$mdb->dt[option_name]."</option>";
		}
	}else{
	$SelectString = $SelectString."<option value=''> 옵션이 없습니다.</option>";
	}

	$SelectString = $SelectString."</Select>";

	return $SelectString;
}
function makeSelectBox($table,$where,$select_name,$msg){
	global $id,$main_inventory;

	$db = new Database;
	$db->query("SELECT * FROM ".$table." ".$where." ");

	$mstring = "<select name='$select_name' >";
	$mstring .= "<option value=''>출고 보관장소를 선택해주세요</option>";
		if($db->total){
			for($i=0;$i < $db->total;$i++){
				$db->fetch($i);
				$mstring .= "<option value='".$db->dt[pi_ix]."' ".($db->dt[pi_ix] == $main_inventory ? "selected":"").">".$db->dt[place_name]."</option>";
			}
		}else{
			$mstring .= "<option value=''>".$msg."</option>";
		}
		$mstring .= "</select>";

	return $mstring;
}

?>